<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Texscript</title>
    <style>
      h1 {
        font-weight: 100;
      }

      table {
        border-collapse: collapse;
      }

      tr {
        border-bottom: 1px solid black;
      }

      th,
      td {
        text-align: left;
        vertical-align: top;
        padding: 4px 8px;
      }

      ol {
        padding-inline-start: 24px;
        margin-block-start: 0;
        margin-block-end: 0;
      }
    </style>
  </head>
  <body style="font-family: monospace">
    <h1>Texscript Releases</h1>
    <table id="releases-table"></table>
    <br />
    <h1>How to use?</h1>
    <pre id="how-to-use-pre">
&lt;script src="https://m9j.github.io/texscript/v1/texscript.js" defer type="module"&gt;&lt;/script&gt;
&lt;script type="text/texscript"&gt;
  Page: "Hello World"
&lt;/script&gt;</pre
    >
    <br />
    <h1>Examples</h1>
    <ol>
      <li><a href="./example-resume">Resume</a></li>
    </ol>
  </body>
  <script type="text/javascript">
    function createTableForUI(releases) {
      const table = document.getElementById("releases-table");
      const headers = Object.keys(releases[0]);
      const totalItems = releases.length;
      const headerRow = document.createElement("tr");
      for (let header of headers) {
        const th = document.createElement("th");
        th.innerText = header;
        headerRow.appendChild(th);
      }
      table.appendChild(headerRow);
      for (let release of releases) {
        const row = document.createElement("tr");
        for (let column of headers) {
          const col = document.createElement("td");
          if (column === "URL") {
            const a = document.createElement("a");
            a.href = release[column];
            a.innerText = release[column];
            col.appendChild(a);
          } else if (column === "RELEASE NOTES") {
            const ol = document.createElement("ol");
            for (let releaseNoteEntry of release[column]) {
              const li = document.createElement("li");
              if (releaseNoteEntry.startsWith("http")) {
                li.innerHTML = `<a href=${releaseNoteEntry}>${releaseNoteEntry}</a>`;
              } else {
                li.innerText = releaseNoteEntry;
              }
              ol.appendChild(li);
            }
            col.appendChild(ol);
          } else {
            col.innerText = release[column];
          }
          row.appendChild(col);
        }
        table.appendChild(row);
      }
    }

    createTableForUI([
      {
        VERSION: "v1",
        "RELEASE NOTES": [
          "https://m9j.github.io/texscript/v1/texscript.js",
          "This is a prototype version of Texscript",
          "Written in JavaScript",
        ],
      },
      {
        VERSION: "v2",
        "RELEASE NOTES": [
          "https://m9j.github.io/texscript/v2/texscript.js",
          "Same as v1 (with minor fixes)",
          "Converted to TypeScript",
          "Built from typescript-converted source",
        ],
      },
    ]);
  </script>
</html>
