import{a as p}from"./chunk-756GRGXS.js";import{b as s,c as l,d as h}from"./chunk-7XXSJRCO.js";import{a as g}from"./chunk-MDUWDC5A.js";import"./chunk-GKXYOKXO.js";var m={pageSize:"A4"};var u=.0393701,f={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}};function w(t,i="mm"){let e=f[t.toUpperCase()];if(!e)return null;switch(i){case"px":return{width:Math.round(e.width*3.779527),height:Math.round(e.height*3.779527)};case"in":return{width:parseFloat((e.width*u).toFixed(2)),height:parseFloat((e.height*u).toFixed(2))};case"mm":default:return e}}async function z(t,i){try{if(s("Compiling..."),t.compile(i),t.ast){let c=t.ast.configurations;c&&(s("Loading configurations..."),await S(c),h("95"));let d=t.ast.references;d&&(s("Loading references..."),await P(d),h("98"))}let e=t.generateCodeFor("HTML");s("Compilation done.");let o=document.querySelector(".texscript-banner-container");o instanceof HTMLElement&&(o.style.display="none");let n=document.createElement("div");n.className="texscript-pages",h("100");let r=g();n.innerHTML=e,r.appendChild(n);let a=document.createElement("div");a.className="texscript-pages-container",a.appendChild(n),r.innerHTML=a.outerHTML,window.TexscriptCompiler={...t.toString(),toggleSplashStatus:()=>l()}}catch(e){s(e,"error")}}async function C(t){let i=document.createElement("link");i.rel="stylesheet",i.href=t;try{document.head.appendChild(i),await new Promise((e,o)=>{i.onload=()=>e(),i.onerror=()=>{let n=p.ERR0018+`
`+t;o(new Error(n))}})}catch(e){s(e,"error")}}async function S(t){t&&await M(t.pageSize||m.pageSize)}async function P(t){if(t){let i=t.css;for(let e of i)await C(e)}}async function M(t){if(t){let i="",e=`@media print { @page { size: ${t}} }`;i+=e;let o="in",n=w(t,o);if(n&&n.width&&n.height){let a=`
        .texscript-Page { 
          width: ${n.width+o}; 
          height: ${n.height+o};
        }`;i+=a}let r=document.createElement("style");r.textContent=i,document.head.appendChild(r)}}export{z as process};
