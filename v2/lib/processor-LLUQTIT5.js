import{a as f}from"./chunk-756GRGXS.js";import{b as s,c as S,d as h}from"./chunk-DW2PY7PO.js";import{a as u}from"./chunk-5JW66B4Q.js";import"./chunk-GKXYOKXO.js";var d={pageSize:"",pagePadding:"",lineHeight:"1.0"};var m=.0393701,P={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}};function C(t,i="mm"){let e=P[t.toUpperCase()];if(!e)return null;switch(i){case"px":return{width:Math.round(e.width*3.779527),height:Math.round(e.height*3.779527)};case"in":return{width:parseFloat((e.width*m).toFixed(2)),height:parseFloat((e.height*m).toFixed(2))};case"mm":default:return e}}var a={classes:{},globalRules:[]};function l(t,i,e){a.classes[t]||(a.classes[t]={}),a.classes[t][i]=e}function y(t){a.globalRules.push(t)}function M(t){let i=Object.entries(t.classes).map(([o,n])=>{let c=Object.entries(n).map(([r,g])=>`${r}: ${g};`).join(" ");return`${o} { ${c} }`}).join(`
`),e=t.globalRules.join(`
`);return`${i}
${e}`}function x(t){let i=document.createElement("style");i.textContent=t,document.head.appendChild(i)}async function w(t){if(t){await E(t.pageSize),await T(t.pagePadding),await R(t.lineHeight);let i=M(a);x(i)}}async function R(t=d.lineHeight){t&&l(".texscript-Page","line-height",t)}async function T(t=d.pagePadding){t&&t&&l(".texscript-Page","padding",t)}async function E(t=d.pageSize){if(t){let e=C(t,"in");e&&e.width&&e.height&&(y(`@media print { @page { size: ${t}} }`),l(".texscript-Page","width",e.width+"in"),l(".texscript-Page","height",e.height+"in"))}}async function k(t,i){try{if(s("Compiling..."),t.compile(i),t.ast){let g=t.ast.configurations;g&&(s("Loading configurations..."),await L(g),h("95"));let p=t.ast.references;p&&(s("Loading references..."),await F(p),h("98"))}let e=t.generateCodeFor("HTML");s("Compilation done.");let o=document.querySelector(".texscript-banner-container");o instanceof HTMLElement&&(o.style.display="none");let n=document.createElement("div");n.className="texscript-pages",h("100");let c=u();n.innerHTML=e,c.appendChild(n);let r=document.createElement("div");r.className="texscript-pages-container",r.appendChild(n),c.innerHTML=r.outerHTML,window.TexscriptCompiler={...t.toString(),toggleSplashStatus:()=>S()}}catch(e){s(e,"error")}}async function b(t){let i=document.createElement("link");i.rel="stylesheet",i.href=t;try{document.head.appendChild(i),await new Promise((e,o)=>{i.onload=()=>e(),i.onerror=()=>{let n=f.ERR0018+`
`+t;o(new Error(n))}})}catch(e){s(e,"error")}}async function F(t){if(t){let i=t.css;if(i)for(let e of i)await b(e)}}async function L(t){t&&w(t)}export{k as process};
