export const __webpack_esm_id__=24;export const __webpack_esm_ids__=[24,343];export const __webpack_esm_modules__={24:(e,t,s)=>{s.d(t,{default:()=>R});var r=s(343);class n{#e=null;#t=null;#s=null;constructor(e){if(!e)throw new Error(r.default.ERR0013);this.#e=e}start(){this.#t=performance.now()}end(){this.#s=performance.now();const e=this.getFormattedTime();console.log(`[Texscript: Metrics] > ${this.#e} finished in ${e}`)}getTotalTimeMilliseconds(){return this.#s-this.#t}getFormattedTime(){const e=this.getTotalTimeMilliseconds();return e<1e3?`${e.toFixed(3)}ms`:`${(e/1e3).toFixed(3)}s`}}class o{#r=null;constructor(e){this.#r=e}getNodeType(){return this.#r}}class i extends o{value=null;meta={};body=[];dependencies={};constructor(){super("ROOT")}}class l extends o{value=null;htmlElement=null;customCSSClasses=[];parameters=null;children=[];constructor(){super("TAG")}}class a extends o{value=null;constructor(){super("LITERAL")}}class c extends o{htmlElement=null;value=null;constructor(){super("SPEC_TAG")}}const E=function(e,t){const s=new Map;for(const r of e){const e=r.split("|").map(e=>t[e].source),n=new RegExp(e.join(""));s.set(r,n)}return s}(["BR","BRACKET_SQUARE_CLOSE","HR","KEYWORD|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|CSS_CLASS|SPACE|PARAMETERS|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|SPACE|PARAMETERS|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|SPACE|PARAMETERS|COLON|SPACE|STRING","KEYWORD|SPACE|PARAMETERS|SPACE|BRACKET_SQUARE_OPEN","STRING","EXTERNAL_REFERENCE"],{KEYWORD:/(^[A-Z][a-z]*)/,STRING:/\"(.*)\"$|(\\\"(.*)\\\"$)/,CSS_CLASS:/\.([a-z]+[a-zA-Z]*)/,EXTERNAL_REFERENCE:/(\@[A-Z][a-zA-Z]*\:\s\".*\")/,PARAMETERS:/(\([\s*\w+\:\s*\w+\,*\s*]*\))/,BRACKET_SQUARE_CLOSE:/(\])/,BRACKET_SQUARE_OPEN:/(\[)/,COLON:/(\:)/,SPACE:/(\s)/,BR:/(\:\:)/,HR:/(\-\-)/});class p{constructor(){this.items=[]}push(e){this.items.push(e)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return 0===this.items.length}size(){return this.items.length}peek(){if(this.isEmpty())throw new Error("Stack is empty");return this.items[this.items.length-1]}}class R{version="v0.1";repourl="https://github.com/M9J/texscript.git";metricsCompilation=new n("Compilation");metricsCodeGeneration=new n("CodeGeneration");rawCode=null;loc=null;tokens=null;ast=null;constructor(){console.log(`[Texscript: Info] > Compiler ${this.version}`)}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:new Map([["loc",this.loc],["tokens",this.tokens],["ast",this.ast]])}}compile(e){this.rawCode=e,this.metricsCompilation.start(),this.loc=this.convertToLinesOfCode(),this.tokens=this.lexicalAnalysis(),this.ast=this.syntaxAnalysis(),this.metricsCompilation.end()}generateCodeFor(e){if(!e)throw new Error(r.default.ERR0011);this.metricsCodeGeneration.start();let t=null;if("HTML"!==e)throw new Error(r.default.ERR0012);return t=this.generateCodeForHTML(),this.metricsCodeGeneration.end(),t}generateCodeForHTML(){const e=this.ast;if(!e)throw new Error(r.default.ERR0009);let t="";const s=e.body;if(s)for(const e of s)t+=this.generateHTMLForNode(e);return t.trim()}generateHTMLForNode(e){if(!e)throw new Error(r.default.ERR0010);const t=e.getNodeType(),s=e.value,n=e.parameters,o=e.htmlElement,i=e.customCSSClasses;let l="",a="";const c=n||!1;if(!!Array.isArray(i)&&i.length>0&&(l=` ${i.join(" ")}`),c)for(const e in n){const t=n[e];a+=` texscript-${s}-${e.toUpperCase()}-${t.toUpperCase()}`}const E=e.children||[];return"TAG"===t?`<${o} class="texscript-${s}${l}${a}">\n          ${E.length>0&&E.map(e=>this.generateHTMLForNode(e)).join("")}\n      </${o}>\n      `:"SPEC_TAG"===t?`<${o} class="texscript-${s}"/>`:"LITERAL"===t?`${s}`:void 0}syntaxAnalysis(){const e=this.tokens;if(!e)throw new Error(r.default.ERR0007);const t=new i;t.value="Program",t.meta.languageName="Texscript",t.meta.languageCompilerVersion=this.version;const s=!!Array.isArray(e)&&e.length>0,[n,o,E]=[new p,new p,new p];if(s){let s=null;for(const i of e){if(!!Array.isArray(i)&&i.length>0)for(const e of i){if(!e.type)throw new Error(r.default.ERR0008);switch(e.type){case"BR":{const e=new c;e.htmlElement="br",e.value="BR",s.children.push(e);break}case"BRACKET_SQUARE_CLOSE":n.isEmpty()||n.pop(),n.isEmpty()||(s=n.peek());break;case"BRACKET_SQUARE_OPEN":n.push(s);break;case"COLON":o.push(e);break;case"CSS_CLASS":s.customCSSClasses.push(e.value);break;case"EXTERNAL_REFERENCE":if(e.value){const s=e.value.replace(/[\@\s\"]/g,""),[r,n]=s.split(":");"CustomCSSFilePath"===r&&(t.dependencies[r]=n)}break;case"HR":{const e=new c;e.htmlElement="hr",e.value="HR",s.children.push(e);break}case"KEYWORD":{const r=new l;if(r.value=e.value,"Section"===e.value?r.htmlElement="section":"List"===e.value?r.htmlElement="ul":r.htmlElement="div",s=r,n.isEmpty())t.body.push(s);else{const e=n.peek();e&&e.children.push(s)}break}case"PARAMETERS":{const t=e.value.replace(/[\(\)\s]/g,"").split(",");for(const e of t){const[t,r]=e.split(":");s.parameters||(s.parameters={}),s.parameters[t]=r}break}case"SPACE":E.push(e);break;case"STRING":{const t=new a;t.value=e.value;const r=new l;if(n.isEmpty()?(r.value="Line",r.htmlElement="div"):"List"===n.peek().value?(r.value="ListItem",r.htmlElement="li"):(r.value="Line",r.htmlElement="div"),r.children.push(t),!s)throw new Error("'currentNode' doesn't exist");s.children.push(r),o.isEmpty()||E.isEmpty()||(n.isEmpty()||(s=n.peek()),o.pop(),E.pop());break}}}}}return t}lexicalAnalysis(){const e=this.loc;if(!e)throw new Error(r.default.ERR0004);const t=[];for(const[s,n]of e.entries()){let e=!1;for(const[s,r]of E){const o=n.match(r);if(!!Array.isArray(o)&&o.length>0){e=!0;const[r,...i]=o;if(r===n){const e=this.convertLineToTokens(s,i);t.push(e);break}}}if(!e){const e=s+1,t=`${r.default.ERR0017}, line: ${e}<br/>${n}`;throw new Error(t)}}return t}convertLineToTokens(e,t){if(!e)throw new Error(r.default.ERR0005);if(!t)throw new Error(r.default.ERR0006);const s=[],n=e.split("|");for(const[e,r]of n.entries())if(e<t.length){const n={};n.type=r,n.value=t[e],s.push(n)}return s}convertToLinesOfCode(){const e=this.rawCode;if(!e)throw new Error(r.default.ERR0002);return e.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}}},343:(e,t,s)=>{s.d(t,{default:()=>r});const r={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;'}}};