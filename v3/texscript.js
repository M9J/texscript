"use strict";(()=>{var It=Object.defineProperty;var W=e=>{throw TypeError(e)};var p=(e,t)=>()=>(e&&(t=e(e=0)),t);var C=(e,t)=>{for(var r in t)It(e,r,{get:t[r],enumerable:!0})};var Y=(e,t,r)=>t.has(e)||W("Cannot "+r);var x=(e,t,r)=>(Y(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>t.has(e)?W("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),L=(e,t,r,i)=>(Y(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var Q,Z=p(()=>{Q="progress.texscript-splash-progress-bar { width: 100%; height: 4px; position: sticky; top: 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); appearance: none; block-size: 4px; vertical-align: top;}progress.texscript-splash-progress-bar::-webkit-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-moz-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-webkit-progress-value { background-color: #2196f3;}progress.texscript-splash-progress-bar::-webkit-progress-value { transition: width 1s ease-in-out;}"});var V,X=p(()=>{V=".texscript-splash-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; background: #252529; margin: 0; box-sizing: border-box; display: none;}.texscript-splash { font-family: monospace; background: #fff; color: #000; padding: 16px; box-shadow: -4px -8px 16px rgba(0, 0, 0, 0.5); box-sizing: border-box;}.texscript-splash-status { overflow: auto;}.texscript-splash-status-error { color: #a00;}"});var q={};C(q,{default:()=>m});var Dt,m,v=p(()=>{"use strict";Dt={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;',ERR0021:"External Texscript source code not found",ERR0022:"External CSS file not found"},m=Dt});var O,P,M,f,T=p(()=>{"use strict";v();w();f=class{constructor(t){b(this,O,null);b(this,P,null);b(this,M,null);if(!t)throw new Error(m.ERR0013);L(this,O,t)}start(){L(this,P,performance.now())}end(){L(this,M,performance.now());let t=this.getFormattedTime(),r=`[Texscript: Metrics] > ${x(this,O)} finished in ${t}`;console.log(r),u(r)}getTotalTimeMilliseconds(){return x(this,M)&&x(this,P)?x(this,M)-x(this,P):0}getFormattedTime(){let t=this.getTotalTimeMilliseconds();return t<1e3?`${t.toFixed(3)}ms`:`${(t/1e3).toFixed(3)}s`}};O=new WeakMap,P=new WeakMap,M=new WeakMap});var et={};C(et,{findCodeFromDOM:()=>zt});async function zt(){try{let e=[],t=document.querySelectorAll('script[type="text/texscript"]');if(!t)throw new Error(m.ERR0003);if(t.length>1)for(let n of Array.from(t)){let s=await tt(n);s&&e.push(s)}else{let n=t[0];if(n){let s=await tt(n);s&&e.push(s)}}if(!(e.length>0))throw new Error(m.ERR0014);return e.join(`
`)}catch(e){u(e,"error")}}async function tt(e){var s;if(!e)throw new Error(m.ERR0016);let t=(s=e.innerText)!=null?s:null,r=e.getAttribute("src");if(!t&&!r)throw new Error(m.ERR0020);let i=null,n=null;if(t&&(i=t.trim(),!i))throw new Error(m.ERR0014);if(r&&!J.includes(r)){let c=await fetch(r);if(c.status===404)throw new Error(m.ERR0021+": "+r);if(n=(await c.text()).trim(),n)J.push(r);else throw new Error(m.ERR0014)}if(i&&n)return`${i}
${n}`;if(i)return i;if(n)return n}var J,rt=p(()=>{"use strict";v();w();J=[]});var F,k,I,R,_,H,st=p(()=>{"use strict";k=class{constructor(t){b(this,F,null);L(this,F,t)}getNodeType(){return x(this,F)}};F=new WeakMap;I=class extends k{constructor(){super("ROOT");this.value=null;this.meta={};this.body=[];this.dependencies={};this.references={};this.configurations={}}},R=class extends k{constructor(){super("TAG");this.value=null;this.htmlElement=null;this.customCSSClasses=[];this.parameters=null;this.children=[];this.htmlAttributes={}}},_=class extends k{constructor(){super("LITERAL");this.value=null}},H=class extends k{constructor(){super("SPEC_TAG");this.htmlElement=null;this.value=null}}});function Xt(e,t){let r=new Map;for(let i of e){let n=i.split("|").map(c=>{let o=t[c];if(!o)throw new Error(`Unknown token: ${c}`);return o.source}),s=new RegExp(n.join(""));r.set(i,s)}return r}var jt,Kt,Wt,Yt,Zt,Qt,j,it=p(()=>{"use strict";jt={KEYWORD:/(^[A-Z][a-z]*)/,STRING:/"(.*)"$|(\\\"(.*)\\\"$)/},Kt={CSS_CLASS:/\.([a-z]+[a-zA-Z]*)/,COMMAND:/(@[A-Z][a-zA-Z]*\s[\s\w]+:\s*("[^"]*"|\w+))/,PARAMETERS:/(\(([\s\w]+:\s*("[^"]*"|\w+),?\s*)+\))/,URL:/^\"(?:https?:\/\/|\/\/|www\.)?[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(?:\.[a-zA-Z]{2,})?\"$/,MAIL:/^\"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\"$/},Wt={BRACKET_SQUARE_CLOSE:/(\])/,BRACKET_SQUARE_OPEN:/(\[)/,COLON:/(:)/,SPACE:/(\s*)/,WHITESPACE:/(\s)/,BRACKET_ANGLE_CLOSE:/(\>)/,DOUBLE_QUOTE:/(\")/},Yt={BR:/(::)/,HR:/(--)/},Zt={...jt,...Kt,...Wt,...Yt},Qt=["BR","BRACKET_SQUARE_CLOSE","COMMAND","HR","MAIL","KEYWORD|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|CSS_CLASS|SPACE|PARAMETERS|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|SPACE|PARAMETERS|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|SPACE|PARAMETERS","KEYWORD|SPACE|PARAMETERS|COLON|SPACE|STRING","KEYWORD|SPACE|PARAMETERS|SPACE|BRACKET_SQUARE_OPEN","URL","STRING"];j=Xt(Qt,Zt)});var A,nt=p(()=>{"use strict";A=class{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return this.items.length===0}size(){return this.items.length}peek(){return this.isEmpty()?null:this.items[this.items.length-1]}}});var ot={};C(ot,{default:()=>G});var G,at=p(()=>{"use strict";T();v();st();it();nt();G=class{constructor(){this.version="v0.2";this.repourl="https://github.com/M9J/texscript.git";this.metricsCompilation=new f("Texscript Compilation");this.metricsCodeGeneration=new f("Texscript Code Generation");this.rawCode=null;this.loc=null;this.tokens=null;this.ast=null;console.log(`[Texscript: Info] > Compiler ${this.version}`)}get lastCompilation(){return new Map([["loc",this.loc],["tokens",this.tokens],["ast",this.ast]])}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:this.lastCompilation,grammar:j}}compile(t){this.rawCode=t,this.metricsCompilation.start(),this.loc=this.convertToLinesOfCode(),this.tokens=this.lexicalAnalysis(),this.ast=this.syntaxAnalysis(),this.metricsCompilation.end()}generateCodeFor(t){if(!t)throw new Error(m.ERR0011);this.metricsCodeGeneration.start();let r=null;if(t==="HTML")r=this.generateCodeForHTML();else throw new Error(m.ERR0012);return this.metricsCodeGeneration.end(),r}generateCodeForHTML(){if(!this.ast)throw new Error(m.ERR0009);let t="";for(let r of this.ast.body){let i=r.getNodeType();(i==="TAG"||i==="SPEC_TAG"||i==="LITERAL")&&(t+=this.generateHTMLForNode(r))}return t.trim()}generateHTMLForNode(t){if(!t)throw new Error(m.ERR0010);let r=t.getNodeType(),i=t.value,n=t.htmlElement,s=t.htmlAttributes,c=t.parameters,o=t.customCSSClasses,a=t.children||[],l="",d="",g="";if(Array.isArray(o)&&o.length>0&&(l=` ${o.join(" ")}`),c)for(let h in c){let E=c[h];d+=` texscript-${i}-${h.toUpperCase()}-${E.toUpperCase()}`}if(s)for(let h in s){let E=s[h];g+=` ${h}="${E}"`}return r==="TAG"?`<${n} class="texscript-${i}${l}${d}" ${g}>
    ${a.filter(h=>{let E=h.getNodeType();return E==="TAG"||E==="SPEC_TAG"||E==="LITERAL"}).map(h=>this.generateHTMLForNode(h)).join("")}
  </${n}>`:r==="SPEC_TAG"?`<${n} class="texscript-${i}"/>`:r==="LITERAL"?`${i}`:""}syntaxAnalysis(){if(!this.tokens)throw new Error(m.ERR0007);let t=new I;t.value="Program",t.meta.languageName="Texscript",t.meta.languageCompilerVersion=this.version;let r=new A,i=new A,n=new A,s=null;for(let c of this.tokens)for(let o of c){if(!o.type)throw new Error(m.ERR0008);switch(o.type){case"BR":{let a=new H;a.htmlElement="br",a.value="BR",s==null||s.children.push(a);break}case"BRACKET_SQUARE_CLOSE":{r.isEmpty()||r.pop(),r.isEmpty()||(s=r.isEmpty()?null:r.peek());break}case"BRACKET_SQUARE_OPEN":{s&&r.push(s);break}case"COLON":{i.push(o);break}case"COMMAND":{if(o.value){let[a,l]=o.value.split(":");if(a){let[d,g]=a==null?void 0:a.split(" ");if(d&&g&&l){if(d==="@Reference"){let h=l.replace(/[\@\s\"]/g,"");t.references[g]=t.references[g]?[...t.references[g],h]:[h]}else if(d==="@Configure"){let h=l.replace(/[\@\s\"]/g,"");t.configurations[g]=h}}}}break}case"CSS_CLASS":{s==null||s.customCSSClasses.push(o.value);break}case"HR":{let a=new H;a.htmlElement="hr",a.value="HR",s==null||s.children.push(a);break}case"MAIL":case"URL":{let a=new R,l=new _;a.htmlElement="a",a.value="Line";let d=o.value.replace(/\"/g,"");if(o.type==="MAIL"&&(a.htmlAttributes.href="mailto:"+d),o.type==="URL"){let g=h=>h.replace(/^(?!https?:\/\/)/i,"http://");a.htmlAttributes.href=g(d),a.htmlAttributes.target="_blank"}l.value=d,a.children.push(l),s&&(s==null||s.children.push(a));break}case"KEYWORD":{let a=new R;if(a.value=o.value,a.htmlElement=o.value==="Section"?"section":o.value==="List"?"ul":"div",s=a,r.isEmpty())if(t.body.length>0){let l=new R;l.value="PageBreak",l.htmlElement="div",t.body.push(l);let d=new R;d.value="PageWrapper",d.htmlElement="div",d.children.push(s),t.body.push(d)}else{let l=new R;l.value="PageWrapper",l.htmlElement="div",l.children.push(s),t.body.push(l)}else{let l=r.isEmpty()?null:r.peek();l&&l.children.push(s)}break}case"PARAMETERS":{let l=o.value.replace(/[\(\)\s]/g,"").split(",");for(let d of l){let[g,h]=d.split(":");g&&h&&(s!=null&&s.parameters||(s.parameters={}),s.parameters[g]=h)}break}case"SPACE":case"SPACE_OPTIONAL":{n.push(o);break}case"STRING":{let a=new _;a.value=o.value;let l=new R;if(r.isEmpty())l.value="Line",l.htmlElement="div";else{let d=r.isEmpty()?null:r.peek();(d==null?void 0:d.value)==="List"?(l.value="ListItem",l.htmlElement="li"):(l.value="Line",l.htmlElement="div")}if(l.children.push(a),!s)throw new Error("'currentNode' doesn't exist");s.children.push(l),!i.isEmpty()&&!n.isEmpty()&&(s=r.isEmpty()?null:r.peek(),i.pop(),n.pop());break}}}return t}lexicalAnalysis(){if(!this.loc)throw new Error(m.ERR0004);let t=[];for(let[r,i]of this.loc.entries()){let n=!1;for(let[s,c]of j){let o=i.match(c);if(o&&o.length>0){n=!0;let[a,...l]=o;if(a===i){let d=this.convertLineToTokens(s,l.length?l:[a]);t.push(d);break}}}if(!n){let s=r+1,c=`${m.ERR0017}, line: ${s}
${i}`;throw new Error(c)}}return t}convertLineToTokens(t,r){if(!t)throw new Error(m.ERR0005);if(!r)throw new Error(m.ERR0006);let i=[],n=t.split("|");for(let[s,c]of n.entries()){let o=r[s];o!==void 0&&i.push({type:c,value:o})}return i}convertToLinesOfCode(){if(!this.rawCode)throw new Error(m.ERR0002);return this.rawCode.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}}});function U(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}var B,K=p(()=>{"use strict";T();B=class{constructor(){this.metricsCSSBuilder=new f("CSS Builder");this.CSSConfig={classes:{},globalRules:[]}}addStyle(t,r,i){this.CSSConfig.classes[t]||(this.CSSConfig.classes[t]={}),this.CSSConfig.classes[t][r]=i}addGlobalRule(t){this.CSSConfig.globalRules.push(t)}buildCSS(){this.metricsCSSBuilder.start();let t=Object.entries(this.CSSConfig.classes).map(([i,n])=>{let s=Object.entries(n).map(([c,o])=>`${c}: ${o};`).join(" ");return`${i} { ${s} }`}).join(`
`),r=this.CSSConfig.globalRules.join(`
`);return this.metricsCSSBuilder.end(),`${t}
${r}`}}});var D,lt=p(()=>{"use strict";D={pageSize:"",pagePadding:"",lineHeight:"normal"}});function pt(e,t="mm"){let r=Vt[e.toUpperCase()];if(!r)return null;switch(t){case"px":return{width:Math.round(r.width*3.779527),height:Math.round(r.height*3.779527)};case"in":return{width:parseFloat((r.width*ct).toFixed(2)),height:parseFloat((r.height*ct).toFixed(2))};case"mm":default:return r}}var ct,Vt,dt=p(()=>{"use strict";ct=.0393701,Vt={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}}});async function mt(e){if(e){await te(e.pageSize),await Jt(e.pagePadding),await qt(e.lineHeight);let t=N.buildCSS();U(t)}}async function qt(e=D.lineHeight){e&&N.addStyle(".texscript-Page","line-height",e)}async function Jt(e=D.pagePadding){e&&e&&N.addStyle(".texscript-PageWrapper","padding",e)}async function te(e=D.pageSize){if(e){let r=pt(e,"in");r&&r.width&&r.height&&(N.addGlobalRule(`@media print { @page { size: ${e}} }`),N.addStyle(".texscript-PageWrapper","width",r.width+"in"),N.addStyle(".texscript-PageWrapper","height",r.height+"in"))}}var N,ut=p(()=>{"use strict";K();lt();dt();N=new B});function gt(){for(let e of ee){let t=document.createElement("link");t.rel="preconnect",t.href=e.href,e.crossorigin&&(t.crossOrigin="anonymous"),document.head.appendChild(t)}}var ee,ht=p(()=>{"use strict";ee=[{href:"https://fonts.googleapis.com",crossorigin:!1},{href:"https://fonts.gstatic.com",crossorigin:!0}]});var re,$,ft=p(()=>{"use strict";T();re=["align-items","color","display","flex-direction","font-family","font-size","font-weight","justify-content","padding-left","text-align"],$=class{constructor(){this.metricsCSSFilterCompiler=new f("CSS Filter Compiler");this.allowedProperties=re}compile(t){this.metricsCSSFilterCompiler.start();let r={classes:[],imports:[]},i=/@import\s+(?:url\()?["']?([^"')]+)["']?\)?\s*;/g,n;for(;(n=i.exec(t))!==null;){let o=n[1];typeof o=="string"&&o.trim()&&r.imports.push(o.trim())}let s=/((?:\.[a-zA-Z0-9_-]+\s*,?\s*)+)\{([^}]+)\}/g,c;for(;(c=s.exec(t))!==null;){let o=c[1],a=c[2],l=[];a&&a.split(";").forEach(d=>{let[g,h]=d.split(":").map(E=>E.trim());this.allowedProperties.includes(g)&&l.push({property:g,value:h})}),o&&o.split(",").map(g=>g.trim()).forEach(g=>{g.startsWith(".")&&r.classes.push({selector:g,declarations:[...l]})})}return this.metricsCSSFilterCompiler.end(),r}generateFilteredCSSContent(t){var n;if(!t)return"";let r=((n=t.imports)==null?void 0:n.map(s=>`@import url("${s}");`))||[],i=t.classes.map(s=>{let c=s.declarations.map(o=>`  ${o.property}: ${o.value};`).join(`
`);return`${s.selector} {
${c}
}`});return[...r,...i].join(`

`)}}});async function St(e){let t=new f("CSS File Loader");t.start();let r=[];for(let i of e)if(!r.includes(i)){let n=await fetch(i);if(n.status===404)throw new Error(m.ERR0022+": "+i);let s=await n.text();if(s){let c=new $,o=c.compile(s),a=c.generateFilteredCSSContent(o);U(a),r.push(i)}}t.end()}var Et=p(()=>{"use strict";T();v();K();ft()});var xt,Rt=p(()=>{xt="#TexscriptHostElement { position: relative; width: 100%; background-color: #252529; overflow: auto; box-sizing: border-box; margin: 0; padding: 0; }.reset * { box-sizing: border-box; }.display-none { display: none;}a { text-decoration: none; font-style: italic;}"});var Tt,Ct=p(()=>{Tt="@media print { body { background: #fff !important; margin: 0 !important; padding: 0 !important; } .texscript-pages-container { margin: 0 !important; padding: 0 !important; } .texscript-pages { gap: 0px !important; } .texscript-PageWrapper { box-shadow: none !important; page-break-after: always !important; break-after: page !important; page-break-inside: avoid !important; break-inside: avoid !important; } .texscript-Page { margin: 0 !important; box-shadow: none !important; } .texscript-PageBreak { page-break-before: always !important; break-before: page !important; display: block !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; } .page-break-after { page-break-after: always !important; break-after: page !important; } .avoid-break { page-break-inside: avoid !important; break-inside: avoid !important; }}"});var At,wt=p(()=>{At=".texscript-pages-container { display: inline-block; margin: 24px; }.texscript-pages { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; justify-content: flex-start;}.texscript-PageWrapper { display: flex; flex-direction: column; background-color: #fff; box-sizing: border-box; box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.5); flex: 0 0 auto; }.texscript-Page { display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden; }.texscript-Line { display: block; }.texscript-HR { height: 1px; background: rgba(0, 0, 0, 0.1); margin: 8px 0; }"});var bt,yt=p(()=>{bt=".texscript-List-TYPE-BULLET .texscript-ListItem { list-style-type: disc; }.texscript-List-TYPE-NUMBER .texscript-ListItem { list-style-type: decimal; }"});var Lt,vt=p(()=>{"use strict";Rt();Ct();wt();yt();Lt=xt+Tt+At+bt});async function Pt(){await ae(),await le()}async function ae(){try{let e=document.createElement("style");e.textContent=Lt,document.head.appendChild(e)}catch(e){u(e,"error")}}async function le(){let e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.head.appendChild(e)}var Mt=p(()=>{"use strict";w();vt()});var kt={};C(kt,{process:()=>ce});async function ce(e,t){try{let r=new f("Texscript Process");if(r.start(),u("Compiling..."),e.compile(t),await Pt(),e.ast){let a=e.ast.configurations;a&&(u("Loading configurations..."),await de(a),S("95"));let l=e.ast.references;l&&(u("Loading references..."),await pe(l),S("98"))}let i=e.generateCodeFor("HTML");u("Compilation done.");let n=document.querySelector(".texscript-banner-container");n instanceof HTMLElement&&(n.style.display="none");let s=document.createElement("div");s.className="texscript-pages",s.innerHTML=i;let c=document.createElement("div");c.className="texscript-pages-container",c.classList.add("display-none"),c.appendChild(s);let o=y();o.innerHTML=c.outerHTML,await document.fonts.ready,c.classList.remove("display-none"),S("100"),r.end(),window.TexscriptCompiler=e.toString(),me()}catch(r){u(r,"error")}}async function pe(e){e&&(gt(),e.css&&await St(e.css))}async function de(e){e&&await mt(e)}function me(){(!document.title||document.title.trim()==="")&&(document.title="Texscript | "+location.host+location.pathname);let e=document.documentElement;(!e.lang||e.lang.trim()==="")&&(e.lang="en");let t=document.querySelector('meta[name="description"]');t?(!t.content||t.content.trim()==="")&&(t.content="This page was compiled by Texscript Compiler"):(t=document.createElement("meta"),t.name="description",t.content="This page was compiled by Texscript Compiler",document.head.appendChild(t))}var Nt=p(()=>{"use strict";z();T();ut();ht();Et();w();Mt()});var Ot={};C(Ot,{load:()=>ue});async function ue(){try{let e=new f("Texscript Loader");e.start(),u("Getting handy tools..."),S("20");let t=await Promise.resolve().then(()=>(rt(),et));u("Opening curse words..."),S("30");let r=await Promise.resolve().then(()=>(v(),q));u("Loading brain power..."),S("50");let i=await Promise.resolve().then(()=>(at(),ot)),n=new i.default,s=await Promise.resolve().then(()=>(Nt(),kt));S("60"),u("Finding your story...");let c=await t.findCodeFromDOM();if(!c)throw new Error(r.default.ERR0001);S("90"),e.end(),s.process(n,c)}catch(e){u(e,"error")}}var _t=p(()=>{"use strict";T();w()});var Ft={};C(Ft,{hideSplashProgress:()=>Ht,loadSplash:()=>Se,updateSplashProgress:()=>S,updateSplashStatus:()=>u});async function Se(){try{S("8");let e=document.createElement("style");e.innerHTML=fe,document.head.appendChild(e);let t=document.createElement("div");t.innerHTML=he,y().appendChild(t),u("Fetching Texscript Loader...");let i=await Promise.resolve().then(()=>(_t(),Ot));S("10"),u("Fetched Texscript Loader"),u("Loading Texscript modules..."),await i.load()}catch(e){u(e,"error")}}function u(e,t){let r="";t==="error"?r=(s=>`<div class="texscript-splash-status-${s}">${e.toString().replaceAll(`
`,"<br/>")}</div>`)("error"):r=`<div>${e}</div>`;let i=document.getElementById("texscript-splash-status");if(i&&(s=>{i.innerHTML+=s})(r),t&&["error"].includes(t)){let n=document.getElementById("texscript-splash");n&&(n.style.display="flex")}t==="error"&&console.error(e)}function S(e){if(e){let t=document.getElementById("texscript-splash-progress");t&&t.setAttribute("value",e),parseInt(e)>99&&Ht()}}function Ht(){let e=document.getElementById("texscript-splash-progress");e&&(e.style.display="none")}var ge,he,fe,w=p(()=>{"use strict";z();X();ge='Texscript Markup Language [Version 0.2]<br/>Free and Open Source. Licensed under GPL-3.0.<br/>Hosted on GitHub: <a href="https://github.com/M9J/texscript.git">texscript.git</a>',he=`
<div class="texscript-splash-container" id="texscript-splash">
  <div class="texscript-splash">
    <div>${ge}</div>
    <br/><hr/><br/>
    <div id="texscript-splash-status"></div>
  </div>
</div>
`,fe=V});var Bt={};C(Bt,{load:()=>Re});async function Re(){let e=y(),t=document.createElement("style");t.textContent=Ee,document.head.appendChild(t);let r=document.createElement("progress");r.setAttribute("class","texscript-splash-progress-bar"),r.setAttribute("id","texscript-splash-progress"),r.setAttribute("value","0"),r.setAttribute("max","100"),e.appendChild(r),r.setAttribute("value","2");let i=await Promise.resolve().then(()=>(w(),Ft));r.setAttribute("value","5"),await i.loadSplash()}var Ee,$t=p(()=>{"use strict";z();Z();Ee=Q});function y(){let e=document.querySelector("[data-texscript-host]");return e||document.body}var z=p(()=>{document.addEventListener("DOMContentLoaded",async()=>{if(window.__texscript_loaded__)return;window.__texscript_loaded__=!0;let e=y();e instanceof HTMLElement&&(e.setAttribute("id","TexscriptHostElement"),e.classList.add("reset"),e instanceof HTMLBodyElement||(e.innerHTML=""),e.style.background="#252529",e.style.margin="0px",e.style.padding="0px"),(await Promise.resolve().then(()=>($t(),Bt))).load()})});z();})();
