"use strict";(()=>{var ee=Object.defineProperty;var et=e=>{throw TypeError(e)};var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var k=(e,t)=>{for(var r in t)ee(e,r,{get:t[r],enumerable:!0})};var rt=(e,t,r)=>t.has(e)||et("Cannot "+r);var T=(e,t,r)=>(rt(e,t,"read from private field"),r?r.call(e):t.get(e)),v=(e,t,r)=>t.has(e)?et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),A=(e,t,r,i)=>(rt(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var st,it=c(()=>{st="progress.texscript-splash-progress-bar { width: 100%; height: 4px; position: sticky; top: 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); appearance: none; block-size: 4px; vertical-align: top;}progress.texscript-splash-progress-bar::-webkit-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-moz-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-webkit-progress-value { background-color: #2196f3;}progress.texscript-splash-progress-bar::-webkit-progress-value { transition: width 1s ease-in-out;}"});var ot,nt=c(()=>{ot=".texscript-splash-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; background: #252529; margin: 0; box-sizing: border-box; display: none;}.texscript-splash { font-family: monospace; background: #fff; color: #000; padding: 16px; box-shadow: -4px -8px 16px rgba(0, 0, 0, 0.5); box-sizing: border-box;}.texscript-splash-status { overflow: auto;}.texscript-splash-status-error { color: #a00;}"});var at={};k(at,{default:()=>l});var se,l,R=c(()=>{"use strict";se={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;',ERR0021:"External Texscript source code not found",ERR0022:"External CSS file not found",ERR0023:"'characterStream' not provided"},l=se});var M,N,O,p,f=c(()=>{"use strict";R();w();p=class{constructor(t){v(this,M,null);v(this,N,null);v(this,O,null);if(!t)throw new Error(l.ERR0013);A(this,M,t)}start(){A(this,N,performance.now())}end(){A(this,O,performance.now());let t=this.getFormattedTime(),r=`[Texscript: Metrics] > ${T(this,M)} finished in ${t}`;console.log(r),d(r)}getTotalTimeMilliseconds(){return T(this,O)&&T(this,N)?T(this,O)-T(this,N):0}getFormattedTime(){let t=this.getTotalTimeMilliseconds();return t<1e3?`${t.toFixed(3)}ms`:`${(t/1e3).toFixed(3)}s`}};M=new WeakMap,N=new WeakMap,O=new WeakMap});var pt={};k(pt,{findCodeFromDOM:()=>ne});async function ne(){try{let e=[],t=document.querySelectorAll('script[type="text/texscript"]');if(!t)throw new Error(l.ERR0003);if(t.length>1)for(let s of Array.from(t)){let o=await lt(s);o&&e.push(o)}else{let s=t[0];if(s){let o=await lt(s);o&&e.push(o)}}if(!(e.length>0))throw new Error(l.ERR0014);return e.join(`
`)}catch(e){d(e,"error")}}async function lt(e){var o;if(!e)throw new Error(l.ERR0016);let t=(o=e.innerText)!=null?o:null,r=e.getAttribute("src");if(!t&&!r)throw new Error(l.ERR0020);let i=null,s=null;if(t&&(i=t.trim(),!i))throw new Error(l.ERR0014);if(r&&!ct.includes(r)){let a=await fetch(r);if(a.status===404)throw new Error(l.ERR0021+": "+r);if(s=(await a.text()).trim(),s)ct.push(r);else throw new Error(l.ERR0014)}if(i&&s)return`${i}
${s}`;if(i)return i;if(s)return s}var ct,dt=c(()=>{"use strict";R();w();ct=[]});var Q=c(()=>{"use strict"});function ae(e){return/^[0-9]$/.test(e)}function ce(e){return/^[A-Z]$/.test(e)}function le(e){return/^[a-z]$/.test(e)}function L(e){return/^ $/.test(e)}function pe(e){return/^\($/.test(e)}function X(e){return/^\)$/.test(e)}function V(e){return/^\[$/.test(e)}function de(e){return/^\]$/.test(e)}function J(e){return/^\:$/.test(e)}function ut(e){return/^\,$/.test(e)}function ue(e){return/^\$$/.test(e)}function he(e){return/^\@$/.test(e)}function ht(e){return/^\/$/.test(e)}function mt(e){return/^\.$/.test(e)}function gt(e){return/^\"$/.test(e)}function me(e){return/^$/.test(e)}function Z(e){return/^\n$/.test(e)}var _,St=c(()=>{"use strict";R();f();Q();_=class{constructor(t){this.metrics=new p("PrePrecessor");this.characterStream=[];if(!t)throw new Error(l.ERR0023);this.characterStream=t}lexicalAnalysis(){this.metrics.start();let t=[],r=0,i=0,s="",o=this.characterStream.length;for(let a=0;a<o+1;a++){let n=this.characterStream[a]||"";switch(i){case 0:{if(L(n))continue;if(Z(n)){r++;continue}else X(n)?(i=1,a--):pe(n)?i=2:de(n)?(i=3,a--):V(n)?i=4:J(n)?i=5:ut(n)?i=6:ue(n)?i=9:he(n)?i=10:ht(n)?i=11:mt(n)?i=12:le(n)?(i=7,a--):ae(n)?i=13:ce(n)?(i=8,a--):gt(n)?i=14:me(n)?i=15:i=16;break}case 1:{t.push({type:"BRACKET_ROUND_CLOSE",value:")"}),i=0;break}case 2:{t.push({type:"BRACKET_ROUND_OPEN",value:"("}),i=0,a--;break}case 3:{t.push({type:"BRACKET_SQUARE_CLOSE",value:"]"}),i=0;break}case 4:{t.push({type:"BRACKET_SQUARE_OPEN",value:"["}),i=0,a--;break}case 5:{t.push({type:"COLON",value:":"}),i=0,a--;break}case 6:{t.push({type:"COMMA",value:","}),i=0;break}case 9:{L(n)||X(n)||Z(n)||ut(n)?(t.push({type:"CONSTANT",value:s}),s="",i=0,a--):s+=n;break}case 10:{L(n)?(t.push({type:"DECLARATION",value:s}),s="",i=0):s+=n;break}case 11:{ht(n)?(t.push({type:"DECORATOR",value:s}),s="",i=0):s+=n;break}case 12:{t.push({type:"DOT",value:"."}),i=0,a--;break}case 15:{s="",i=15;break}case 16:throw new Error("Error happened during lexical analysis");case 7:{L(n)||J(n)||V(n)||X(n)?(t.push({type:"IDENTIFIER",value:s}),s="",i=0,a--):s+=n;break}case 13:{s+=n,L(n)&&(t.push({type:"INTEGER",value:s}),s="",i=0);break}case 8:{L(n)||J(n)||mt(n)||Z(n)||V(n)?(t.push({type:"KEYWORD",value:s}),s="",i=0,a--):s+=n;break}case 14:{gt(n)?(t.push({type:"STRING",value:s}),s="",i=0):s+=n;break}}}return t.length&&!r&&++r,this.metrics.end(),{tokens:t,locCount:r}}}});var B,ft=c(()=>{"use strict";R();f();B=class{constructor(t){this.metrics=new p("PrePrecessor");this.rawCode="";if(!t)throw new Error(l.ERR0002);this.rawCode=t}preprocessCode(){this.metrics.start();let t=this.trim(this.rawCode),r=this.normalize(t),i=this.convertToCharacterStream(r);return this.metrics.end(),i}convertToCharacterStream(t){return t.split("")}normalize(t){return t.replace(/\r/gi,"")}trim(t){return t.trim()}}});var I,P,U,y,G,j,Rt=c(()=>{"use strict";P=class{constructor(t){v(this,I,null);A(this,I,t)}getNodeType(){return T(this,I)}};I=new WeakMap;U=class extends P{constructor(){super("ROOT");this.value=null;this.meta={};this.body=[];this.references={};this.configurations={}}},y=class extends P{constructor(){super("TAG");this.value=null;this.htmlElement=null;this.customCSSClasses=[];this.parameters={};this.children=[];this.htmlAttributes={}}},G=class extends P{constructor(){super("LITERAL");this.value=null}},j=class extends P{constructor(){super("SPEC_TAG");this.htmlElement=null;this.value=null}}});var g,Et=c(()=>{"use strict";g=class{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return this.items.length===0}peek(){return this.isEmpty()?null:this.items[this.items.length-1]}}});var $,Ct=c(()=>{"use strict";R();f();Rt();Et();Q();$=class{constructor(t){this.metrics=new p("PrePrecessor");this.tokens=[];this.ast=new U;this.declarations={configure:{},reference:{}};this.declarationStack=new g;this.contextStack=new g;this.tagStack=new g;this.bracketRoundStack=new g;this.bracketSquareStack=new g;this.colonStack=new g;this.dotStack=new g;this.keyStack=new g;this.currentNode=null;if(!t)throw new Error(l.ERR0007);this.tokens=t}syntaxAnalysis(){this.metrics.start();for(let[t,r]of Object.entries(this.tokens))switch(r.type){case"BRACKET_ROUND_CLOSE":this.handleBracketRoundClose();break;case"BRACKET_ROUND_OPEN":this.handleBracketRoundOpen();break;case"BRACKET_SQUARE_CLOSE":this.handleBracketSquareClose();break;case"BRACKET_SQUARE_OPEN":this.handleBracketSquareOpen();break;case"COLON":this.handleColon(r);break;case"COMMA":continue;case"CONSTANT":this.handleConstant(r);break;case"DECLARATION":this.handleDeclaration(r);break;case"DECORATOR":this.handleDecorator(r);break;case"DOT":this.handleDot();break;case"IDENTIFIER":this.handleIdentifier(r);break;case"INTEGER":continue;case"KEYWORD":this.handleKeyword(r);break;case"STRING":this.handleString(r);break}return this.ast.configurations=this.declarations.configure,this.ast.references=this.declarations.reference,this.metrics.end(),this.ast}handleString(t){let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):i?this.handleParameterStatement(t):this.handleStringLiteralStatement(t)}handleKeyword(t){this.contextStack.push("KEYWORD");let r=new y;if(r.value=t.value,r.htmlElement="div",t.value==="Section"?r.htmlElement="section":t.value==="List"&&(r.htmlElement="ul"),this.currentNode=r,this.tagStack.isEmpty()){if(this.ast.body.length>0){let s=new y;s.value="PageBreak",s.htmlElement="div",this.ast.body.push(s)}let i=new y;i.value="PageWrapper",i.htmlElement="div",i.children.push(this.currentNode),this.ast.body.push(i)}else{let i=this.tagStack.isEmpty()?null:this.tagStack.peek();i&&i.children&&i.children.push(this.currentNode)}}handleIdentifier(t){var o;let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.dotStack.peek()==="DOT",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN";r?this.declarationStack.push(t.value):i?((o=this.currentNode)==null||o.customCSSClasses.push(t.value),this.dotStack.pop()):s&&this.keyStack.push(t.value)}handleDot(){this.contextStack.peek()==="KEYWORD"&&this.dotStack.push("DOT")}handleDecorator(t){var o;let r=new j,i=/\:+/.test(t.value),s=/\-+/.test(t.value);i?(r.htmlElement="br",r.value="BR"):s&&(r.htmlElement="hr",r.value="HR"),(o=this.currentNode)==null||o.children.push(r)}handleDeclaration(t){this.contextStack.push("DECLARATION"),this.declarationStack.push(t.value)}handleConstant(t){let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):i&&this.handleParameterStatement(t)}handleColon(t){this.colonStack.push(t.value)}handleBracketSquareOpen(){this.bracketSquareStack.push("BRACKET_SQUARE_OPEN"),this.currentNode&&this.tagStack.push(this.currentNode)}handleBracketSquareClose(){this.tagStack.isEmpty()||this.tagStack.pop(),this.tagStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek()),this.contextStack.pop(),this.bracketSquareStack.pop()}handleBracketRoundOpen(){this.bracketRoundStack.push("BRACKET_ROUND_OPEN")}handleBracketRoundClose(){this.bracketRoundStack.pop()}handleDeclarationStatement(t){let r=t.value,i=this.declarationStack.pop(),s=this.declarationStack.pop().toLowerCase();s&&i&&r&&(this.declarations[s]||(this.declarations[s]={}),s==="configure"?this.declarations[s][i]=r:s==="reference"&&(this.declarations[s][i]||(this.declarations[s][i]=[]),Array.isArray(this.declarations[s][i])&&(this.declarations[s][i].includes(r)||this.declarations[s][i].push(r))),this.colonStack.pop(),this.contextStack.pop())}handleParameterStatement(t){let r=this.keyStack.pop();this.currentNode&&(this.currentNode.parameters||(this.currentNode.parameters={}),this.currentNode.parameters[r]=t.value,this.colonStack.pop())}handleStringLiteralStatement(t){let r=new G;r.value=t.value;let i=new y;if(this.tagStack.isEmpty())i.value="Line",i.htmlElement="div";else{let s=this.tagStack.isEmpty()?null:this.tagStack.peek();(s==null?void 0:s.value)==="List"?(i.value="ListItem",i.htmlElement="li"):(i.value="Line",i.htmlElement="div")}if(i.children.push(r),!this.currentNode)throw new Error("'currentNode' doesn't exist");this.currentNode.children.push(i),this.colonStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek(),this.colonStack.pop())}}});var Tt={};k(Tt,{default:()=>z});var z,xt=c(()=>{"use strict";R();f();St();ft();Ct();z=class{constructor(){this.version="v0.2";this.repourl="https://github.com/M9J/texscript.git";this.metrics=new p("Texscript Compilation");this.rawCode="";this.loc=null;this.tokens=null;this.ast=null;this.locCount=0;console.log(`[Texscript: Info] > Compiler ${this.version}`)}get lastCompilation(){return new Map([["loc",this.loc],["tokens",this.tokens],["ast",this.ast]])}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:this.lastCompilation}}compile(t){if(!t)throw new Error(l.ERR0002);this.metrics.start(),this.rawCode=t;let i=new B(this.rawCode).preprocessCode(),s=new _(i),{tokens:o,locCount:a}=s.lexicalAnalysis();this.tokens=o,this.locCount=a;let u=new $(o).syntaxAnalysis();return u.value="Program",u.meta.languageName="Texscript",u.meta.languageCompilerVersion=this.version,this.metrics.end(),u}}});function q(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}var F,tt=c(()=>{"use strict";f();F=class{constructor(){this.metricsCSSBuilder=new p("CSS Builder");this.CSSConfig={classes:{},globalRules:[]}}addStyle(t,r,i){this.CSSConfig.classes[t]||(this.CSSConfig.classes[t]={}),this.CSSConfig.classes[t][r]=i}addGlobalRule(t){this.CSSConfig.globalRules.push(t)}buildCSS(){this.metricsCSSBuilder.start();let t=Object.entries(this.CSSConfig.classes).map(([i,s])=>{let o=Object.entries(s).map(([a,n])=>`${a}: ${n};`).join(" ");return`${i} { ${o} }`}).join(`
`),r=this.CSSConfig.globalRules.join(`
`);return this.metricsCSSBuilder.end(),`${t}
${r}`}}});var W,kt=c(()=>{"use strict";W={pageSize:"",pagePadding:"",lineHeight:"normal"}});function yt(e,t="mm"){let r=ge[e.toUpperCase()];if(!r)return null;switch(t){case"px":return{width:Math.round(r.width*3.779527),height:Math.round(r.height*3.779527)};case"in":return{width:parseFloat((r.width*wt).toFixed(2)),height:parseFloat((r.height*wt).toFixed(2))};case"mm":default:return r}}var wt,ge,bt=c(()=>{"use strict";wt=.0393701,ge={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}}});async function vt(e){if(e){await Re(e.pageSize),await fe(e.pagePadding),await Se(e.lineHeight);let t=D.buildCSS();q(t)}}async function Se(e=W.lineHeight){e&&D.addStyle(".texscript-Page","line-height",e)}async function fe(e=W.pagePadding){e&&e&&D.addStyle(".texscript-PageWrapper","padding",e)}async function Re(e=W.pageSize){if(e){let r=yt(e,"in");r&&r.width&&r.height&&(D.addGlobalRule(`@media print { @page { size: ${e}} }`),D.addStyle(".texscript-PageWrapper","width",r.width+"in"),D.addStyle(".texscript-PageWrapper","height",r.height+"in"))}}var D,At=c(()=>{"use strict";tt();kt();bt();D=new F});function Nt(){for(let e of Ee){let t=document.createElement("link");t.rel="preconnect",t.href=e.href,e.crossorigin&&(t.crossOrigin="anonymous"),document.head.appendChild(t)}}var Ee,Ot=c(()=>{"use strict";Ee=[{href:"https://fonts.googleapis.com",crossorigin:!1},{href:"https://fonts.gstatic.com",crossorigin:!0}]});var Ce,H,Lt=c(()=>{"use strict";f();Ce=["align-items","color","display","flex-direction","font-family","font-size","font-weight","justify-content","padding-left","text-align"],H=class{constructor(){this.metricsCSSFilterCompiler=new p("CSS Filter Compiler");this.allowedProperties=Ce}compile(t){this.metricsCSSFilterCompiler.start();let r={classes:[],imports:[]},i=/@import\s+(?:url\()?["']?([^"')]+)["']?\)?\s*;/g,s;for(;(s=i.exec(t))!==null;){let n=s[1];typeof n=="string"&&n.trim()&&r.imports.push(n.trim())}let o=/((?:\.[a-zA-Z0-9_-]+\s*,?\s*)+)\{([^}]+)\}/g,a;for(;(a=o.exec(t))!==null;){let n=a[1],u=a[2],x=[];u&&u.split(";").forEach(C=>{let[h,S]=C.split(":").map(E=>E.trim());this.allowedProperties.includes(h)&&x.push({property:h,value:S})}),n&&n.split(",").map(h=>h.trim()).forEach(h=>{h.startsWith(".")&&r.classes.push({selector:h,declarations:[...x]})})}return this.metricsCSSFilterCompiler.end(),r}generateFilteredCSSContent(t){var s;if(!t)return"";let r=((s=t.imports)==null?void 0:s.map(o=>`@import url("${o}");`))||[],i=t.classes.map(o=>{let a=o.declarations.map(n=>`  ${n.property}: ${n.value};`).join(`
`);return`${o.selector} {
${a}
}`});return[...r,...i].join(`

`)}}});async function Pt(e){let t=new p("CSS File Loader");t.start();let r=[];for(let i of e)if(!r.includes(i)){let s=await fetch(i);if(s.status===404)throw new Error(l.ERR0022+": "+i);let o=await s.text();if(o){let a=new H,n=a.compile(o),u=a.generateFilteredCSSContent(n);q(u),r.push(i)}}t.end()}var Dt=c(()=>{"use strict";f();R();tt();Lt()});var _t,Mt=c(()=>{_t="#TexscriptHostElement { position: relative; width: 100%; background-color: #252529; overflow: auto; box-sizing: border-box; margin: 0; padding: 0; }.reset * { box-sizing: border-box; }.display-none { display: none;}a { text-decoration: none; font-style: italic;}"});var It,Bt=c(()=>{It="@media print { body { background: #fff !important; margin: 0 !important; padding: 0 !important; } .texscript-pages-container { margin: 0 !important; padding: 0 !important; } .texscript-pages { gap: 0px !important; } .texscript-PageWrapper { box-shadow: none !important; page-break-after: always !important; break-after: page !important; page-break-inside: avoid !important; break-inside: avoid !important; } .texscript-Page { margin: 0 !important; box-shadow: none !important; } .texscript-PageBreak { page-break-before: always !important; break-before: page !important; display: block !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; } .page-break-after { page-break-after: always !important; break-after: page !important; } .avoid-break { page-break-inside: avoid !important; break-inside: avoid !important; }}"});var Ft,$t=c(()=>{Ft=".texscript-pages-container { display: inline-block; margin: 24px; }.texscript-pages { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; justify-content: flex-start;}.texscript-PageWrapper { display: flex; flex-direction: column; background-color: #fff; box-sizing: border-box; box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.5); flex: 0 0 auto; }.texscript-Page { display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden; }.texscript-Line { display: block; }.texscript-HR { height: 1px; background: rgba(0, 0, 0, 0.1); margin: 8px 0; }"});var Kt,Ht=c(()=>{Kt=".texscript-List-TYPE-BULLET .texscript-ListItem { list-style-type: disc; }.texscript-List-TYPE-NUMBER .texscript-ListItem { list-style-type: decimal; }"});var Ut,Gt=c(()=>{"use strict";Mt();Bt();$t();Ht();Ut=_t+It+Ft+Kt});async function jt(){await ye(),await be()}async function ye(){try{let e=document.createElement("style");e.textContent=Ut,document.head.appendChild(e)}catch(e){d(e,"error")}}async function be(){let e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.head.appendChild(e)}var zt=c(()=>{"use strict";w();Gt()});var K,qt=c(()=>{"use strict";R();f();K=class{constructor(t){this.ast=null;this.metrics=new p("Texscript Code Generation");if(!t)throw new Error(l.ERR0009);this.ast=t}generateCodeForHTML(){if(!this.ast)throw new Error(l.ERR0009);let t="";this.metrics.start();for(let r of this.ast.body){let i=r.getNodeType();(i==="TAG"||i==="SPEC_TAG"||i==="LITERAL")&&(t+=this.generateHTMLForNode(r))}return this.metrics.end(),t.trim()}generateHTMLForNode(t){if(!t)throw new Error(l.ERR0010);let r=t.getNodeType(),i=t.value,s=t.htmlElement,o=t.htmlAttributes,a=t.parameters,n=t.customCSSClasses,u=t.children||[],x="",C="",h="";if(Array.isArray(n)&&n.length>0&&(x=` ${n.join(" ")}`),a)for(let S in a){let E=a[S];C+=` texscript-${i}-${S.toUpperCase()}-${E.toUpperCase()}`}if(o)for(let S in o){let E=o[S];h+=` ${S}="${E}"`}return r==="TAG"?`<${s} class="texscript-${i}${x}${C}" ${h}>
    ${u.filter(S=>{let E=S.getNodeType();return E==="TAG"||E==="SPEC_TAG"||E==="LITERAL"}).map(S=>this.generateHTMLForNode(S)).join("")}</${s}>`:r==="SPEC_TAG"?`<${s} class="texscript-${i}"/>`:r==="LITERAL"?`${i}`:""}}});var Wt={};k(Wt,{process:()=>ve});async function ve(e,t){try{let r=new p("Texscript Process");r.start(),d("Compiling...");let i=e.compile(t);if(await jt(),i){let C=i.configurations;C&&(d("Loading configurations..."),await Ne(C),m("95"));let h=i.references;h&&(d("Loading references..."),await Ae(h),m("98"))}let o=new K(i).generateCodeForHTML();d("Compilation done.");let a=document.querySelector(".texscript-banner-container");a instanceof HTMLElement&&(a.style.display="none");let n=document.createElement("div");n.className="texscript-pages",n.innerHTML=o;let u=document.createElement("div");u.className="texscript-pages-container",u.classList.add("display-none"),u.appendChild(n);let x=b();x.innerHTML=u.outerHTML,await document.fonts.ready,u.classList.remove("display-none"),m("100"),r.end(),window.TexscriptCompiler=e.toString(),Oe()}catch(r){d(r,"error")}}async function Ae(e){e&&(Nt(),e.css&&await Pt(e.css))}async function Ne(e){e&&await vt(e)}function Oe(){(!document.title||document.title.trim()==="")&&(document.title="Texscript | "+location.host+location.pathname);let e=document.documentElement;(!e.lang||e.lang.trim()==="")&&(e.lang="en");let t=document.querySelector('meta[name="description"]');t?(!t.content||t.content.trim()==="")&&(t.content="This page was compiled by Texscript Compiler"):(t=document.createElement("meta"),t.name="description",t.content="This page was compiled by Texscript Compiler",document.head.appendChild(t))}var Yt=c(()=>{"use strict";Y();f();At();Ot();Dt();w();zt();qt()});var Qt={};k(Qt,{load:()=>Le});async function Le(){try{let e=new p("Texscript Loader");e.start(),d("Getting handy tools..."),m("20");let t=await Promise.resolve().then(()=>(dt(),pt));d("Opening curse words..."),m("30");let r=await Promise.resolve().then(()=>(R(),at));d("Loading brain power..."),m("50");let i=await Promise.resolve().then(()=>(xt(),Tt)),s=new i.default,o=await Promise.resolve().then(()=>(Yt(),Wt));m("60"),d("Finding your story...");let a=await t.findCodeFromDOM();if(!a)throw new Error(r.default.ERR0001);m("90"),e.end(),o.process(s,a)}catch(e){d(e,"error")}}var Xt=c(()=>{"use strict";f();w()});var Jt={};k(Jt,{hideSplashProgress:()=>Vt,loadSplash:()=>_e,updateSplashProgress:()=>m,updateSplashStatus:()=>d});async function _e(){try{m("8");let e=document.createElement("style");e.innerHTML=Me,document.head.appendChild(e);let t=document.createElement("div");t.innerHTML=De,b().appendChild(t),d("Fetching Texscript Loader...");let i=await Promise.resolve().then(()=>(Xt(),Qt));m("10"),d("Fetched Texscript Loader"),d("Loading Texscript modules..."),await i.load()}catch(e){d(e,"error")}}function d(e,t){let r="";t==="error"?r=(o=>`<div class="texscript-splash-status-${o}">${e.toString().replaceAll(`
`,"<br/>")}</div>`)("error"):r=`<div>${e}</div>`;let i=document.getElementById("texscript-splash-status");if(i&&(o=>{i.innerHTML+=o})(r),t&&["error"].includes(t)){let s=document.getElementById("texscript-splash");s&&(s.style.display="flex")}t==="error"&&console.error(e)}function m(e){if(e){let t=document.getElementById("texscript-splash-progress");t&&t.setAttribute("value",e),parseInt(e)>99&&Vt()}}function Vt(){let e=document.getElementById("texscript-splash-progress");e&&(e.style.display="none")}var Pe,De,Me,w=c(()=>{"use strict";Y();nt();Pe='Texscript Markup Language [Version 0.2]<br/>Free and Open Source. Licensed under GPL-3.0.<br/>Hosted on GitHub: <a href="https://github.com/M9J/texscript.git">texscript.git</a>',De=`
<div class="texscript-splash-container" id="texscript-splash">
  <div class="texscript-splash">
    <div>${Pe}</div>
    <br/><hr/><br/>
    <div id="texscript-splash-status"></div>
  </div>
</div>
`,Me=ot});var Zt={};k(Zt,{load:()=>Ie});async function Ie(){let e=b(),t=document.createElement("style");t.textContent=Be,document.head.appendChild(t);let r=document.createElement("progress");r.setAttribute("class","texscript-splash-progress-bar"),r.setAttribute("id","texscript-splash-progress"),r.setAttribute("value","0"),r.setAttribute("max","100"),e.appendChild(r),r.setAttribute("value","2");let i=await Promise.resolve().then(()=>(w(),Jt));r.setAttribute("value","5"),await i.loadSplash()}var Be,te=c(()=>{"use strict";Y();it();Be=st});function b(){let e=document.querySelector("[data-texscript-host]");return e||document.body}var Y=c(()=>{document.addEventListener("DOMContentLoaded",async()=>{if(window.__texscript_loaded__)return;window.__texscript_loaded__=!0;let e=b();e instanceof HTMLElement&&(e.setAttribute("id","TexscriptHostElement"),e.classList.add("reset"),e instanceof HTMLBodyElement||(e.innerHTML=""),e.style.background="#252529",e.style.margin="0px",e.style.padding="0px"),(await Promise.resolve().then(()=>(te(),Zt))).load()})});Y();})();
