"use strict";(()=>{var oe=Object.defineProperty;var ot=e=>{throw TypeError(e)};var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var x=(e,t)=>{for(var r in t)oe(e,r,{get:t[r],enumerable:!0})};var at=(e,t,r)=>t.has(e)||ot("Cannot "+r);var k=(e,t,r)=>(at(e,t,"read from private field"),r?r.call(e):t.get(e)),A=(e,t,r)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),O=(e,t,r,s)=>(at(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var lt,ct=c(()=>{lt="progress.texscript-splash-progress-bar { width: 100%; height: 4px; position: sticky; top: 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); appearance: none; block-size: 4px; vertical-align: top;}progress.texscript-splash-progress-bar::-webkit-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-moz-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-webkit-progress-value { background-color: #2196f3;}progress.texscript-splash-progress-bar::-webkit-progress-value { transition: width 1s ease-in-out;}"});var dt,pt=c(()=>{dt=".texscript-splash-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; background: #252529; margin: 0; box-sizing: border-box; display: none;}.texscript-splash { font-family: monospace; background: #fff; color: #000; padding: 16px; box-shadow: -4px -8px 16px rgba(0, 0, 0, 0.5); box-sizing: border-box;}.texscript-splash-status { overflow: auto;}.texscript-splash-status-error { color: #a00;}"});var ut={};x(ut,{default:()=>l});var le,l,C=c(()=>{"use strict";le={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;',ERR0021:"External Texscript source code not found",ERR0022:"External CSS file not found",ERR0023:"'characterStream' not provided",ERR0024:"Missing closing round bracket",ERR0025:"Missing closing square bracket",ERR0026:"Syntax is wrong. Kindly recheck your code",ERR0027:"Missing opening round bracket",ERR0028:"Missing opening square bracket"},l=le});var D,N,L,p,E=c(()=>{"use strict";C();w();p=class{constructor(t){A(this,D,null);A(this,N,null);A(this,L,null);if(!t)throw new Error(l.ERR0013);O(this,D,t)}start(){O(this,N,performance.now())}end(){O(this,L,performance.now());let t=this.getFormattedTime(),r=`[Texscript: Metrics] > ${k(this,D)} finished in ${t}`;console.log(r),d(r)}getTotalTimeMilliseconds(){return k(this,L)&&k(this,N)?k(this,L)-k(this,N):0}getFormattedTime(){let t=this.getTotalTimeMilliseconds();return t<1e3?`${t.toFixed(3)}ms`:`${(t/1e3).toFixed(3)}s`}};D=new WeakMap,N=new WeakMap,L=new WeakMap});var gt={};x(gt,{findCSSFromBody:()=>J,findCodeFromDOM:()=>pe});async function pe(){try{let e=[],t=document.querySelectorAll('script[type="text/texscript"]');if(!t)throw new Error(l.ERR0003);if(t.length>1)for(let i of Array.from(t)){let o=await mt(i);o&&e.push(o)}else{let i=t[0];if(i){let o=await mt(i);o&&e.push(o)}}if(e.length===0){let i=await de();i&&e.push(i)}if(!(e.length>0))throw new Error(l.ERR0014);return e.join(`
`)}catch(e){d(e,"error")}}async function mt(e){var o;if(!e)throw new Error(l.ERR0016);let t=(o=e.innerText)!=null?o:null,r=e.getAttribute("src");if(!t&&!r)throw new Error(l.ERR0020);let s=null,i=null;if(t&&(s=t.trim(),!s))throw new Error(l.ERR0014);if(r&&!ht.includes(r)){let a=await fetch(r);if(a.status===404)throw new Error(l.ERR0021+": "+r);if(i=(await a.text()).trim(),i)ht.push(r);else throw new Error(l.ERR0014)}if(s&&i)return`${s}
${i}`;if(s)return s;if(i)return i}async function de(){return document.body.innerText.replace(/<[^>]*>[\s\S]*?<\/[^>]*>/g,"")}async function J(){let e=document.body.querySelectorAll("style"),t="";if(e.length>0)for(let r=0;r<e.length;r++)t+=e.item(r).textContent;return t}var ht,Z=c(()=>{"use strict";C();w();ht=[]});var G=c(()=>{"use strict"});function ue(e){return/^[0-9]$/.test(e)}function he(e){return/^[A-Z]$/.test(e)}function me(e){return/^[a-z]$/.test(e)}function P(e){return/^ $/.test(e)}function ge(e){return/^\($/.test(e)}function tt(e){return/^\)$/.test(e)}function et(e){return/^\[$/.test(e)}function Se(e){return/^\]$/.test(e)}function rt(e){return/^\:$/.test(e)}function St(e){return/^\,$/.test(e)}function fe(e){return/^\$$/.test(e)}function Re(e){return/^\@$/.test(e)}function ft(e){return/^\/$/.test(e)}function Rt(e){return/^\.$/.test(e)}function Et(e){return/^\"$/.test(e)}function Ee(e){return/^$/.test(e)}function st(e){return/^\n$/.test(e)}var I,Tt=c(()=>{"use strict";C();E();G();I=class{constructor(t){this.metrics=new p("PrePrecessor");this.characterStream=[];if(!t)throw new Error(l.ERR0023);this.characterStream=t}lexicalAnalysis(){this.metrics.start();let t=[],r=0,s=0,i="",o=this.characterStream.length;for(let a=0;a<o+1;a++){let n=this.characterStream[a]||"";switch(s){case 0:{if(P(n))continue;if(st(n)){r++;continue}else tt(n)?(s=1,a--):ge(n)?s=2:Se(n)?(s=3,a--):et(n)?s=4:rt(n)?s=5:St(n)?s=6:fe(n)?s=9:Re(n)?s=10:ft(n)?s=11:Rt(n)?s=12:me(n)?(s=7,a--):ue(n)?s=13:he(n)?(s=8,a--):Et(n)?s=14:Ee(n)?s=15:s=16;break}case 1:{t.push({type:"BRACKET_ROUND_CLOSE",value:")"}),s=0;break}case 2:{t.push({type:"BRACKET_ROUND_OPEN",value:"("}),s=0,a--;break}case 3:{t.push({type:"BRACKET_SQUARE_CLOSE",value:"]"}),s=0;break}case 4:{t.push({type:"BRACKET_SQUARE_OPEN",value:"["}),s=0,a--;break}case 5:{t.push({type:"COLON",value:":"}),s=0,a--;break}case 6:{t.push({type:"COMMA",value:","}),s=0;break}case 9:{P(n)||tt(n)||st(n)||St(n)?(t.push({type:"CONSTANT",value:i}),i="",s=0,a--):i+=n;break}case 10:{P(n)?(t.push({type:"DECLARATION",value:i}),i="",s=0):i+=n;break}case 11:{ft(n)?(t.push({type:"DECORATOR",value:i}),i="",s=0):i+=n;break}case 12:{t.push({type:"DOT",value:"."}),s=0,a--;break}case 15:{i="",s=15;break}case 16:throw new Error("Error happened during lexical analysis");case 7:{P(n)||rt(n)||et(n)||tt(n)?(t.push({type:"IDENTIFIER",value:i}),i="",s=0,a--):i+=n;break}case 13:{i+=n,P(n)&&(t.push({type:"INTEGER",value:i}),i="",s=0);break}case 8:{P(n)||rt(n)||Rt(n)||st(n)||et(n)?(t.push({type:"KEYWORD",value:i}),i="",s=0,a--):i+=n;break}case 14:{Et(n)?(t.push({type:"STRING",value:i}),i="",s=0):i+=n;break}}}return t.length&&!r&&++r,this.metrics.end(),{tokens:t,locCount:r}}}});var F,kt=c(()=>{"use strict";C();E();F=class{constructor(t){this.metrics=new p("PrePrecessor");this.rawCode="";if(!t)throw new Error(l.ERR0002);this.rawCode=t}preprocessCode(){this.metrics.start();let t=this.trim(this.rawCode),r=this.normalize(t),s=this.convertToCharacterStream(r);return this.metrics.end(),s}convertToCharacterStream(t){return t.split("")}normalize(t){return t.replace(/\r/gi,"")}trim(t){return t.trim()}}});var $,M,q,y,j,W,xt=c(()=>{"use strict";M=class{constructor(t){A(this,$,null);O(this,$,t)}getNodeType(){return k(this,$)}};$=new WeakMap;q=class extends M{constructor(){super("ROOT");this.value=null;this.meta={};this.body=[];this.references={};this.configurations={}}},y=class extends M{constructor(){super("TAG");this.value=null;this.htmlElement=null;this.customCSSClasses=[];this.parameters={};this.children=[];this.htmlAttributes={}}},j=class extends M{constructor(){super("LITERAL");this.value=null}},W=class extends M{constructor(){super("SPEC_TAG");this.htmlElement=null;this.value=null}}});var m,it=c(()=>{"use strict";m=class{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return this.items.length===0}peek(){return this.isEmpty()?null:this.items[this.items.length-1]}get size(){return this.items.length}}});var H,wt=c(()=>{"use strict";C();E();xt();it();G();H=class{constructor(t){this.metrics=new p("PrePrecessor");this.tokens=[];this.ast=new q;this.declarations={configure:{},reference:{}};this.declarationStack=new m;this.contextStack=new m;this.tagStack=new m;this.bracketRoundStack=new m;this.bracketSquareStack=new m;this.colonStack=new m;this.dotStack=new m;this.keyStack=new m;this.currentNode=null;if(!t)throw new Error(l.ERR0007);this.tokens=t}syntaxAnalysis(){this.metrics.start();for(let[t,r]of Object.entries(this.tokens))switch(r.type){case"BRACKET_ROUND_CLOSE":this.handleBracketRoundClose();break;case"BRACKET_ROUND_OPEN":this.handleBracketRoundOpen();break;case"BRACKET_SQUARE_CLOSE":this.handleBracketSquareClose();break;case"BRACKET_SQUARE_OPEN":this.handleBracketSquareOpen();break;case"COLON":this.handleColon(r);break;case"COMMA":continue;case"CONSTANT":this.handleConstant(r);break;case"DECLARATION":this.handleDeclaration(r);break;case"DECORATOR":this.handleDecorator(r);break;case"DOT":this.handleDot();break;case"IDENTIFIER":this.handleIdentifier(r);break;case"INTEGER":continue;case"KEYWORD":this.handleKeyword(r);break;case"STRING":this.handleString(r);break}return this.ast.configurations=this.declarations.configure,this.ast.references=this.declarations.reference,this.metrics.end(),this.ast}handleString(t){let r=this.contextStack.peek()==="DECLARATION",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):s?this.handleParameterStatement(t):this.handleStringLiteralStatement(t)}handleKeyword(t){this.contextStack.push("KEYWORD");let r=new y;if(r.value=t.value,r.htmlElement="div",t.value==="Section"?r.htmlElement="section":t.value==="List"&&(r.htmlElement="ul"),this.currentNode=r,this.tagStack.isEmpty()){if(this.ast.body.length>0){let i=new y;i.value="PageBreak",i.htmlElement="div",this.ast.body.push(i)}let s=new y;s.value="PageWrapper",s.htmlElement="div",s.children.push(this.currentNode),this.ast.body.push(s)}else{let s=this.tagStack.isEmpty()?null:this.tagStack.peek();s&&s.children&&s.children.push(this.currentNode)}}handleIdentifier(t){var o;let r=this.contextStack.peek()==="DECLARATION",s=this.contextStack.peek()==="KEYWORD"&&this.dotStack.peek()==="DOT",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN";r?this.declarationStack.push(t.value):s?((o=this.currentNode)==null||o.customCSSClasses.push(t.value),this.dotStack.pop()):i&&this.keyStack.push(t.value)}handleDot(){this.contextStack.peek()==="KEYWORD"&&this.dotStack.push("DOT")}handleDecorator(t){var o;let r=new W,s=/\:+/.test(t.value),i=/\-+/.test(t.value);s?(r.htmlElement="br",r.value="BR"):i&&(r.htmlElement="hr",r.value="HR"),(o=this.currentNode)==null||o.children.push(r)}handleDeclaration(t){this.contextStack.push("DECLARATION"),this.declarationStack.push(t.value)}handleConstant(t){let r=this.contextStack.peek()==="DECLARATION",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):s&&this.handleParameterStatement(t)}handleColon(t){this.colonStack.push(t.value)}handleBracketSquareOpen(){this.bracketSquareStack.push("BRACKET_SQUARE_OPEN"),this.currentNode&&this.tagStack.push(this.currentNode)}handleBracketSquareClose(){this.tagStack.isEmpty()||this.tagStack.pop(),this.tagStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek()),this.contextStack.pop(),this.bracketSquareStack.pop()}handleBracketRoundOpen(){this.bracketRoundStack.push("BRACKET_ROUND_OPEN")}handleBracketRoundClose(){this.bracketRoundStack.pop()}handleDeclarationStatement(t){let r=t.value,s=this.declarationStack.pop(),i=this.declarationStack.pop().toLowerCase();i&&s&&r&&(this.declarations[i]||(this.declarations[i]={}),i==="configure"?this.declarations[i][s]=r:i==="reference"&&(this.declarations[i][s]||(this.declarations[i][s]=[]),Array.isArray(this.declarations[i][s])&&(this.declarations[i][s].includes(r)||this.declarations[i][s].push(r))),this.colonStack.pop(),this.contextStack.pop())}handleParameterStatement(t){let r=this.keyStack.pop();this.currentNode&&(this.currentNode.parameters||(this.currentNode.parameters={}),this.currentNode.parameters[r]=t.value,this.colonStack.pop())}handleStringLiteralStatement(t){let r=new j;r.value=t.value;let s=new y;if(this.tagStack.isEmpty())s.value="Line",s.htmlElement="div";else{let i=this.tagStack.isEmpty()?null:this.tagStack.peek();(i==null?void 0:i.value)==="List"?(s.value="ListItem",s.htmlElement="li"):(s.value="Line",s.htmlElement="div")}if(s.children.push(r),!this.currentNode)throw new Error("'currentNode' doesn't exist");this.currentNode.children.push(s),this.colonStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek(),this.colonStack.pop())}}});var K,yt=c(()=>{"use strict";C();E();it();G();K=class{constructor(t){this.metrics=new p("Syntax Checker");this.tokens=[];if(!t)throw new Error(l.ERR0007);this.tokens=t}checkSyntax(){let t=!1;return this.metrics.start(),t=this.checkBracketsBalance(),this.metrics.end(),t}checkBracketsBalance(){let t=new m,r=new m,s=new m,i=new m;for(let u of this.tokens)if(u.type==="BRACKET_ROUND_OPEN")t.push(u);else if(u.type==="BRACKET_ROUND_CLOSE")r.push(u);else if(u.type==="BRACKET_SQUARE_OPEN")s.push(u);else if(u.type==="BRACKET_SQUARE_CLOSE")i.push(u);else continue;let o=t.size<r.size,a=t.size>r.size,n=s.size<i.size,g=s.size>i.size;if(o)throw new Error(l.ERR0027);if(a)throw new Error(l.ERR0024);if(n)throw new Error(l.ERR0028);if(g)throw new Error(l.ERR0025);return!0}}});var bt={};x(bt,{default:()=>Y});var Y,vt=c(()=>{"use strict";C();E();Tt();kt();wt();yt();Y=class{constructor(){this.version="v0.3";this.repourl="https://github.com/M9J/texscript.git";this.metrics=new p("Texscript Compilation");this.rawCode="";this.tokens=null;this.ast=null;this.locCount=0;console.log(`[Texscript: Info] > Compiler ${this.version}`)}get lastCompilation(){return new Map([["tokens",this.tokens],["ast",this.ast]])}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:this.lastCompilation}}compile(t){if(!t)throw new Error(l.ERR0002);this.metrics.start(),this.rawCode=t;let s=new F(this.rawCode).preprocessCode(),i=new I(s),{tokens:o,locCount:a}=i.lexicalAnalysis();if(this.tokens=o,this.locCount=a,!new K(o).checkSyntax())throw new Error(l.ERR0026);let h=new H(o).syntaxAnalysis();return h.value="Program",h.meta.languageName="Texscript",h.meta.languageCompilerVersion=this.version,this.ast=h,this.metrics.end(),h}}});var U,At=c(()=>{"use strict";C();E();U=class{constructor(t){this.ast=null;this.metrics=new p("Texscript Code Generation");if(!t)throw new Error(l.ERR0009);this.ast=t}generateCodeForHTML(){if(!this.ast)throw new Error(l.ERR0009);let t="";this.metrics.start();for(let r of this.ast.body){let s=r.getNodeType();(s==="TAG"||s==="SPEC_TAG"||s==="LITERAL")&&(t+=this.generateHTMLForNode(r))}return this.metrics.end(),t.trim()}generateHTMLForNode(t){if(!t)throw new Error(l.ERR0010);let r=t.getNodeType(),s=t.value,i=t.htmlElement,o=t.htmlAttributes,a=t.parameters,n=t.customCSSClasses,g=t.children||[],u="",h="",S="";if(Array.isArray(n)&&n.length>0&&(u=` ${n.join(" ")}`),a)for(let f in a){let T=a[f];h+=` texscript-${s}-${f.toUpperCase()}-${T.toUpperCase()}`}if(o)for(let f in o){let T=o[f];S+=` ${f}="${T}"`}return r==="TAG"?`<${i} class="texscript-${s}${u}${h}" ${S}>
    ${g.filter(f=>{let T=f.getNodeType();return T==="TAG"||T==="SPEC_TAG"||T==="LITERAL"}).map(f=>this.generateHTMLForNode(f)).join("")}</${i}>`:r==="SPEC_TAG"?`<${i} class="texscript-${s}"/>`:r==="LITERAL"?`${s}`:""}}});function B(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}var z,Q=c(()=>{"use strict";E();z=class{constructor(){this.metricsCSSBuilder=new p("CSS Builder");this.CSSConfig={classes:{},globalRules:[]}}addStyle(t,r,s){this.CSSConfig.classes[t]||(this.CSSConfig.classes[t]={}),this.CSSConfig.classes[t][r]=s}addGlobalRule(t){this.CSSConfig.globalRules.push(t)}buildCSS(){this.metricsCSSBuilder.start();let t=Object.entries(this.CSSConfig.classes).map(([s,i])=>{let o=Object.entries(i).map(([a,n])=>`${a}: ${n};`).join(" ");return`${s} { ${o} }`}).join(`
`),r=this.CSSConfig.globalRules.join(`
`);return this.metricsCSSBuilder.end(),`${t}
${r}`}}});var X,Ot=c(()=>{"use strict";X={pageSize:"",pagePadding:"",lineHeight:"normal"}});function Lt(e,t="mm"){let r=Ce[e.toUpperCase()];if(!r)return null;switch(t){case"px":return{width:Math.round(r.width*3.779527),height:Math.round(r.height*3.779527)};case"in":return{width:parseFloat((r.width*Nt).toFixed(2)),height:parseFloat((r.height*Nt).toFixed(2))};case"mm":default:return r}}var Nt,Ce,Pt=c(()=>{"use strict";Nt=.0393701,Ce={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}}});async function Mt(e){if(e){await xe(e.pageSize),await ke(e.pagePadding),await Te(e.lineHeight);let t=_.buildCSS();B(t)}}async function Te(e=X.lineHeight){e&&_.addStyle(".texscript-Page","line-height",e)}async function ke(e=X.pagePadding){e&&e&&_.addStyle(".texscript-PageWrapper","padding",e)}async function xe(e=X.pageSize){if(e){let r=Lt(e,"in");r&&r.width&&r.height&&(_.addGlobalRule(`@media print { @page { size: ${e}} }`),_.addStyle(".texscript-PageWrapper","width",r.width+"in"),_.addStyle(".texscript-PageWrapper","height",r.height+"in"))}}var _,Bt=c(()=>{"use strict";Ot();Pt();Q();_=new z});var we,b,nt=c(()=>{"use strict";E();we=["align-items","color","display","flex-direction","font-family","font-size","font-weight","justify-content","padding-left","text-align"],b=class{constructor(){this.metricsCSSFilterCompiler=new p("CSS Filter Compiler");this.allowedProperties=we}compile(t){this.metricsCSSFilterCompiler.start();let r={classes:[],imports:[]},s=/@import\s+(?:url\()?["']?([^"')]+)["']?\)?\s*;/g,i;for(;(i=s.exec(t))!==null;){let n=i[1];typeof n=="string"&&n.trim()&&r.imports.push(n.trim())}let o=/((?:\.[a-zA-Z0-9_-]+\s*,?\s*)+)\{([^}]+)\}/g,a;for(;(a=o.exec(t))!==null;){let n=a[1],g=a[2],u=[];g&&g.split(";").forEach(h=>{let[S,f]=h.split(":").map(T=>T.trim());this.allowedProperties.includes(S)&&u.push({property:S,value:f})}),n&&n.split(",").map(S=>S.trim()).forEach(S=>{S.startsWith(".")&&r.classes.push({selector:S,declarations:[...u]})})}return this.metricsCSSFilterCompiler.end(),r}generateFilteredCSSContent(t){var i;if(!t)return"";let r=((i=t.imports)==null?void 0:i.map(o=>`@import url("${o}");`))||[],s=t.classes.map(o=>{let a=o.declarations.map(n=>`  ${n.property}: ${n.value};`).join(`
`);return`${o.selector} {
${a}
}`});return[...r,...s].join(`

`)}}});async function _t(e){let t=new p("CSS File Loader");t.start();let r=[];for(let s of e)if(!r.includes(s)){let i=await fetch(s);if(i.status===404)throw new Error(l.ERR0022+": "+s);let o=await i.text();if(o){let a=new b,n=a.compile(o),g=a.generateFilteredCSSContent(n);B(g),r.push(s)}}t.end()}var Dt=c(()=>{"use strict";C();E();Q();nt()});function It(){for(let e of ye){let t=document.createElement("link");t.rel="preconnect",t.href=e.href,e.crossorigin&&(t.crossOrigin="anonymous"),document.head.appendChild(t)}}var ye,Ft=c(()=>{"use strict";ye=[{href:"https://fonts.googleapis.com",crossorigin:!1},{href:"https://fonts.gstatic.com",crossorigin:!0}]});var Ht,$t=c(()=>{Ht="#TexscriptHostElement { position: relative; width: 100%; background-color: #252529; overflow: auto; box-sizing: border-box; margin: 0; padding: 0;}.reset * { box-sizing: border-box;}.display-none { display: none;}a { text-decoration: none; font-style: italic;}"});var Ut,Kt=c(()=>{Ut="@media print { body { background: #fff !important; margin: 0 !important; padding: 0 !important; } .texscript-pages-container { margin: 0 !important; padding: 0 !important; } .texscript-pages { gap: 0px !important; } .texscript-PageWrapper { box-shadow: none !important; page-break-after: always !important; break-after: page !important; page-break-inside: avoid !important; break-inside: avoid !important; } .texscript-Page { margin: 0 !important; box-shadow: none !important; } .texscript-PageBreak { page-break-before: always !important; break-before: page !important; display: block !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; } .page-break-after { page-break-after: always !important; break-after: page !important; } .avoid-break { page-break-inside: avoid !important; break-inside: avoid !important; }}"});var Gt,zt=c(()=>{Gt=".texscript-pages-container { display: inline-block; margin: 24px;}.texscript-pages { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; justify-content: flex-start;}.texscript-PageWrapper { display: flex; flex-direction: column; background-color: #fff; box-sizing: border-box; box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.5); flex: 0 0 auto;}.texscript-Page { display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden;}.texscript-Line { display: block;}.texscript-HR { height: 1px; background: rgba(0, 0, 0, 0.1); margin: 8px 0;}"});var jt,qt=c(()=>{jt=".texscript-List-TYPE-BULLET .texscript-ListItem { list-style-type: disc;}.texscript-List-TYPE-NUMBER .texscript-ListItem { list-style-type: decimal;}"});var Wt,Yt=c(()=>{"use strict";$t();Kt();zt();qt();Wt=Ht+Ut+Gt+jt});async function Qt(){await Ne(),await Le()}async function Ne(){try{let e=document.createElement("style");e.textContent=Wt,document.head.appendChild(e)}catch(e){d(e,"error")}}async function Le(){let e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.head.appendChild(e)}var Xt=c(()=>{"use strict";Yt();w()});var Jt={};x(Jt,{process:()=>Pe});async function Pe(e,t){try{Vt.start(),d("Compiling...");let r=e.compile(t);await Qt();let s=await J();if(s){let h=new b,S=h.compile(s),f=h.generateFilteredCSSContent(S);B(f)}if(r){let h=r.configurations;h&&(d("Loading configurations..."),await Be(h),R("95"));let S=r.references;S&&(d("Loading references..."),await Me(S),R("98"))}let o=new U(r).generateCodeForHTML();d("Compilation done.");let a=document.querySelector(".texscript-banner-container");a instanceof HTMLElement&&(a.style.display="none");let n=document.createElement("div");n.className="texscript-pages",n.innerHTML=o;let g=document.createElement("div");g.className="texscript-pages-container",g.classList.add("display-none"),g.appendChild(n);let u=v();u.innerHTML=g.outerHTML,await document.fonts.ready,g.classList.remove("display-none"),R("100"),window.TexscriptCompiler=e.toString(),_e(),Vt.end()}catch(r){d(r,"error")}}async function Me(e){e&&(It(),e.css&&await _t(e.css))}async function Be(e){e&&await Mt(e)}function _e(){(!document.title||document.title.trim()==="")&&(document.title="Texscript | "+location.host+location.pathname);let e=document.documentElement;(!e.lang||e.lang.trim()==="")&&(e.lang="en");let t=document.querySelector('meta[name="description"]');t?(!t.content||t.content.trim()==="")&&(t.content="This page was compiled by Texscript Compiler"):(t=document.createElement("meta"),t.name="description",t.content="This page was compiled by Texscript Compiler",document.head.appendChild(t))}var Vt,Zt=c(()=>{"use strict";V();At();Q();Bt();Dt();nt();E();Ft();Z();Xt();w();Vt=new p("Texscript Process")});var te={};x(te,{load:()=>De});async function De(){try{let e=new p("Texscript Loader");e.start(),d("Getting handy tools..."),R("20");let t=await Promise.resolve().then(()=>(Z(),gt));d("Opening curse words..."),R("30");let r=await Promise.resolve().then(()=>(C(),ut));d("Loading brain power..."),R("50");let s=await Promise.resolve().then(()=>(vt(),bt)),i=new s.default,o=await Promise.resolve().then(()=>(Zt(),Jt));R("60"),d("Finding your story...");let a=await t.findCodeFromDOM();if(!a)throw new Error(r.default.ERR0001);R("90"),e.end(),o.process(i,a)}catch(e){d(e,"error")}}var ee=c(()=>{"use strict";E();w()});var se={};x(se,{hideSplashProgress:()=>re,loadSplash:()=>He,updateSplashProgress:()=>R,updateSplashStatus:()=>d});async function He(){try{R("8");let e=document.createElement("style");e.innerHTML=$e,document.head.appendChild(e);let t=document.createElement("div");t.innerHTML=Fe,v().appendChild(t),d("Fetching Texscript Loader...");let s=await Promise.resolve().then(()=>(ee(),te));R("10"),d("Fetched Texscript Loader"),d("Loading Texscript modules..."),await s.load()}catch(e){d(e,"error")}}function d(e,t){let r="";t==="error"?r=(o=>`<div class="texscript-splash-status-${o}">${e.toString().replaceAll(`
`,"<br/>")}</div>`)("error"):r=`<div>${e}</div>`;let s=document.getElementById("texscript-splash-status");if(s&&(o=>{s.innerHTML+=o})(r),t&&["error"].includes(t)){let i=document.getElementById("texscript-splash");i&&(i.style.display="flex")}t==="error"&&console.error(e)}function R(e){if(e){let t=document.getElementById("texscript-splash-progress");t&&t.setAttribute("value",e),parseInt(e)>99&&re()}}function re(){let e=document.getElementById("texscript-splash-progress");e&&(e.style.display="none")}var Ie,Fe,$e,w=c(()=>{"use strict";V();pt();Ie='Texscript Markup Language [Version 0.3]<br/>Free and Open Source. Licensed under GPL-3.0.<br/>Hosted on GitHub: <a href="https://github.com/M9J/texscript.git">texscript.git</a>',Fe=`
<div class="texscript-splash-container" id="texscript-splash">
  <div class="texscript-splash">
    <div>${Ie}</div>
    <br/><hr/><br/>
    <div id="texscript-splash-status"></div>
  </div>
</div>
`,$e=dt});var ie={};x(ie,{load:()=>Ue});async function Ue(){let e=v(),t=document.createElement("style");t.textContent=Ke,document.head.appendChild(t);let r=document.createElement("progress");r.setAttribute("class","texscript-splash-progress-bar"),r.setAttribute("id","texscript-splash-progress"),r.setAttribute("value","0"),r.setAttribute("max","100"),e.appendChild(r),r.setAttribute("value","2");let s=await Promise.resolve().then(()=>(w(),se));r.setAttribute("value","5"),await s.loadSplash()}var Ke,ne=c(()=>{"use strict";V();ct();Ke=lt});function v(){let e=document.querySelector("[data-texscript-host]");return e||document.body}var V=c(()=>{document.addEventListener("DOMContentLoaded",async()=>{if(window.__texscript_loaded__)return;window.__texscript_loaded__=!0;let e=v();e instanceof HTMLElement&&(e.setAttribute("id","TexscriptHostElement"),e.classList.add("reset"),e instanceof HTMLBodyElement||(e.innerHTML=""),e.style.background="#252529",e.style.margin="0px",e.style.padding="0px"),(await Promise.resolve().then(()=>(ne(),ie))).load()})});V();})();
