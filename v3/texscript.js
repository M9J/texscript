"use strict";(()=>{var oe=Object.defineProperty;var ot=e=>{throw TypeError(e)};var l=(e,t)=>()=>(e&&(t=e(e=0)),t);var k=(e,t)=>{for(var r in t)oe(e,r,{get:t[r],enumerable:!0})};var at=(e,t,r)=>t.has(e)||ot("Cannot "+r);var x=(e,t,r)=>(at(e,t,"read from private field"),r?r.call(e):t.get(e)),A=(e,t,r)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),O=(e,t,r,i)=>(at(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var lt,ct=l(()=>{lt="progress.texscript-splash-progress-bar { width: 100%; height: 4px; position: sticky; top: 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); appearance: none; block-size: 4px; vertical-align: top;}progress.texscript-splash-progress-bar::-webkit-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-moz-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-webkit-progress-value { background-color: #2196f3;}progress.texscript-splash-progress-bar::-webkit-progress-value { transition: width 1s ease-in-out;}"});var dt,pt=l(()=>{dt=".texscript-splash-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; background: #252529; margin: 0; box-sizing: border-box; display: none;}.texscript-splash { font-family: monospace; background: #fff; color: #000; padding: 16px; box-shadow: -4px -8px 16px rgba(0, 0, 0, 0.5); box-sizing: border-box;}.texscript-splash-status { overflow: auto;}.texscript-splash-status-error { color: #a00;}"});var ut={};k(ut,{default:()=>d});var le,d,C=l(()=>{"use strict";le={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;',ERR0021:"External Texscript source code not found",ERR0022:"External CSS file not found",ERR0023:"'characterStream' not provided",ERR0024:"Missing closing round bracket",ERR0025:"Missing closing square bracket",ERR0026:"Syntax is wrong. Kindly recheck your code",ERR0027:"Missing opening round bracket",ERR0028:"Missing opening square bracket"},d=le});var D,N,L,u,E=l(()=>{"use strict";C();y();u=class{constructor(t){A(this,D,null);A(this,N,null);A(this,L,null);if(!t)throw new Error(d.ERR0013);O(this,D,t)}start(){O(this,N,performance.now())}end(){O(this,L,performance.now());let t=this.getFormattedTime(),r=`[Texscript: Metrics] > ${x(this,D)} finished in ${t}`;console.log(r),h(r)}getTotalTimeMilliseconds(){return x(this,L)&&x(this,N)?x(this,L)-x(this,N):0}getFormattedTime(){let t=this.getTotalTimeMilliseconds();return t<1e3?`${t.toFixed(3)}ms`:`${(t/1e3).toFixed(3)}s`}};D=new WeakMap,N=new WeakMap,L=new WeakMap});var gt={};k(gt,{findCSSFromBody:()=>J,findCodeFromDOM:()=>pe});async function pe(){try{let e=[],t=document.querySelectorAll('script[type="text/texscript"]');if(!t)throw new Error(d.ERR0003);if(t.length>1)for(let s of Array.from(t)){let o=await ht(s);o&&e.push(o)}else{let s=t[0];if(s){let o=await ht(s);o&&e.push(o)}}if(e.length===0){let s=await de();s&&e.push(s)}if(!(e.length>0))throw new Error(d.ERR0014);return e.join(`
`)}catch(e){h(e,"error")}}async function ht(e){var o;if(!e)throw new Error(d.ERR0016);let t=(o=e.innerText)!=null?o:null,r=e.getAttribute("src");if(!t&&!r)throw new Error(d.ERR0020);let i=null,s=null;if(t&&(i=t.trim(),!i))throw new Error(d.ERR0014);if(r&&!mt.includes(r)){let a=await fetch(r);if(a.status===404)throw new Error(d.ERR0021+": "+r);if(s=(await a.text()).trim(),s)mt.push(r);else throw new Error(d.ERR0014)}if(i&&s)return`${i}
${s}`;if(i)return i;if(s)return s}async function de(){return document.body.innerText.replace(/<[^>]*>[\s\S]*?<\/[^>]*>/g,"")}async function J(){let e=document.body.querySelectorAll("style"),t="";if(e.length>0)for(let r=0;r<e.length;r++)t+=e.item(r).textContent;return t}var mt,Z=l(()=>{"use strict";C();y();mt=[]});var j=l(()=>{"use strict"});function ue(e){return/^[0-9]$/.test(e)}function me(e){return/^[A-Z]$/.test(e)}function he(e){return/^[a-z]$/.test(e)}function P(e){return/^ $/.test(e)}function ge(e){return/^\($/.test(e)}function tt(e){return/^\)$/.test(e)}function et(e){return/^\[$/.test(e)}function Se(e){return/^\]$/.test(e)}function rt(e){return/^\:$/.test(e)}function St(e){return/^\,$/.test(e)}function fe(e){return/^\$$/.test(e)}function Re(e){return/^\@$/.test(e)}function ft(e){return/^\/$/.test(e)}function Rt(e){return/^\.$/.test(e)}function Et(e){return/^\"$/.test(e)}function Ee(e){return/^$/.test(e)}function it(e){return/^\n$/.test(e)}var I,Tt=l(()=>{"use strict";C();E();j();I=class{constructor(t){this.metrics=new u("PrePrecessor");this.characterStream=[];if(!t)throw new Error(d.ERR0023);this.characterStream=t}lexicalAnalysis(){this.metrics.start();let t=[],r=0,i=0,s="",o=this.characterStream.length,a=1,c=1,p=()=>c-s.length;for(let m=0;m<o+1;m++,c++){let n=this.characterStream[m]||"";switch(i){case 0:{if(P(n))continue;if(it(n)){r++,a++,c=1;continue}else tt(n)?(i=1,m--,c--):ge(n)?i=2:Se(n)?(i=3,m--,c--):et(n)?i=4:rt(n)?i=5:St(n)?i=6:fe(n)?i=9:Re(n)?i=10:ft(n)?i=11:Rt(n)?i=12:he(n)?(i=7,m--,c--):ue(n)?i=13:me(n)?(i=8,m--,c--):Et(n)?i=14:Ee(n)?i=15:i=16;break}case 1:{t.push({type:"BRACKET_ROUND_CLOSE",value:")",line:a,column:p()}),i=0;break}case 2:{t.push({type:"BRACKET_ROUND_OPEN",value:"(",line:a,column:p()}),i=0,m--,c--;break}case 3:{t.push({type:"BRACKET_SQUARE_CLOSE",value:"]",line:a,column:p()}),i=0;break}case 4:{t.push({type:"BRACKET_SQUARE_OPEN",value:"[",line:a,column:p()}),i=0,m--,c--;break}case 5:{t.push({type:"COLON",value:":",line:a,column:p()}),i=0,m--,c--;break}case 6:{t.push({type:"COMMA",value:",",line:a,column:p()}),i=0;break}case 9:{P(n)||tt(n)||it(n)||St(n)?(t.push({type:"CONSTANT",value:s,line:a,column:p()}),s="",i=0,m--,c--):s+=n;break}case 10:{P(n)?(t.push({type:"DECLARATION",value:s,line:a,column:p()}),s="",i=0):s+=n;break}case 11:{ft(n)?(t.push({type:"DECORATOR",value:s,line:a,column:p()}),s="",i=0):s+=n;break}case 12:{t.push({type:"DOT",value:".",line:a,column:p()}),i=0,m--,c--;break}case 15:{s="",i=15;break}case 16:throw new Error("Error happened during lexical analysis");case 7:{P(n)||rt(n)||et(n)||tt(n)?(t.push({type:"IDENTIFIER",value:s,line:a,column:p()}),s="",i=0,m--,c--):s+=n;break}case 13:{s+=n,P(n)&&(t.push({type:"INTEGER",value:s,line:a,column:p()}),s="",i=0);break}case 8:{P(n)||rt(n)||Rt(n)||it(n)||et(n)?(t.push({type:"KEYWORD",value:s,line:a,column:p()}),s="",i=0,m--,c--):s+=n;break}case 14:{Et(n)?(t.push({type:"STRING",value:s,line:a,column:p()}),s="",i=0):s+=n;break}}}return t.length&&!r&&++r,this.metrics.end(),{tokens:t,locCount:r}}}});var $,xt=l(()=>{"use strict";C();E();$=class{constructor(t){this.metrics=new u("PrePrecessor");this.rawCode="";if(!t)throw new Error(d.ERR0002);this.rawCode=t}preprocessCode(){this.metrics.start();let t=this.trim(this.rawCode),r=this.normalize(t),i=this.convertToCharacterStream(r);return this.metrics.end(),i}convertToCharacterStream(t){return t.split("")}normalize(t){return t.replace(/\r/gi,"")}trim(t){return t.trim()}}});var F,M,z,w,q,W,kt=l(()=>{"use strict";M=class{constructor(t){A(this,F,null);O(this,F,t)}getNodeType(){return x(this,F)}};F=new WeakMap;z=class extends M{constructor(){super("ROOT");this.value=null;this.meta={};this.body=[];this.references={};this.configurations={}}},w=class extends M{constructor(){super("TAG");this.value=null;this.htmlElement=null;this.customCSSClasses=[];this.parameters={};this.children=[];this.htmlAttributes={}}},q=class extends M{constructor(){super("LITERAL");this.value=null}},W=class extends M{constructor(){super("SPEC_TAG");this.htmlElement=null;this.value=null}}});var S,st=l(()=>{"use strict";S=class{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return this.items.length===0}peek(){return this.isEmpty()?null:this.items[this.items.length-1]}get size(){return this.items.length}}});var H,yt=l(()=>{"use strict";C();E();kt();st();j();H=class{constructor(t){this.metrics=new u("PrePrecessor");this.tokens=[];this.ast=new z;this.declarations={configure:{},reference:{}};this.declarationStack=new S;this.contextStack=new S;this.tagStack=new S;this.bracketRoundStack=new S;this.bracketSquareStack=new S;this.colonStack=new S;this.dotStack=new S;this.keyStack=new S;this.currentNode=null;if(!t)throw new Error(d.ERR0007);this.tokens=t}syntaxAnalysis(){this.metrics.start();for(let[t,r]of Object.entries(this.tokens))switch(r.type){case"BRACKET_ROUND_CLOSE":this.handleBracketRoundClose();break;case"BRACKET_ROUND_OPEN":this.handleBracketRoundOpen();break;case"BRACKET_SQUARE_CLOSE":this.handleBracketSquareClose();break;case"BRACKET_SQUARE_OPEN":this.handleBracketSquareOpen();break;case"COLON":this.handleColon(r);break;case"COMMA":continue;case"CONSTANT":this.handleConstant(r);break;case"DECLARATION":this.handleDeclaration(r);break;case"DECORATOR":this.handleDecorator(r);break;case"DOT":this.handleDot();break;case"IDENTIFIER":this.handleIdentifier(r);break;case"INTEGER":continue;case"KEYWORD":this.handleKeyword(r);break;case"STRING":this.handleString(r);break}return this.ast.configurations=this.declarations.configure,this.ast.references=this.declarations.reference,this.metrics.end(),this.ast}handleString(t){let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):i?this.handleParameterStatement(t):this.handleStringLiteralStatement(t)}handleKeyword(t){this.contextStack.push("KEYWORD");let r=new w;if(r.value=t.value,r.htmlElement="div",t.value==="Section"?r.htmlElement="section":t.value==="List"&&(r.htmlElement="ul"),this.currentNode=r,this.tagStack.isEmpty()){if(this.ast.body.length>0){let s=new w;s.value="PageBreak",s.htmlElement="div",this.ast.body.push(s)}let i=new w;i.value="PageWrapper",i.htmlElement="div",i.children.push(this.currentNode),this.ast.body.push(i)}else{let i=this.tagStack.isEmpty()?null:this.tagStack.peek();i&&i.children&&i.children.push(this.currentNode)}}handleIdentifier(t){var o;let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.dotStack.peek()==="DOT",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN";r?this.declarationStack.push(t.value):i?((o=this.currentNode)==null||o.customCSSClasses.push(t.value),this.dotStack.pop()):s&&this.keyStack.push(t.value)}handleDot(){this.contextStack.peek()==="KEYWORD"&&this.dotStack.push("DOT")}handleDecorator(t){var o;let r=new W,i=/\:+/.test(t.value),s=/\-+/.test(t.value);i?(r.htmlElement="br",r.value="BR"):s&&(r.htmlElement="hr",r.value="HR"),(o=this.currentNode)==null||o.children.push(r)}handleDeclaration(t){this.contextStack.push("DECLARATION"),this.declarationStack.push(t.value)}handleConstant(t){let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):i&&this.handleParameterStatement(t)}handleColon(t){this.colonStack.push(t.value)}handleBracketSquareOpen(){this.bracketSquareStack.push("BRACKET_SQUARE_OPEN"),this.currentNode&&this.tagStack.push(this.currentNode)}handleBracketSquareClose(){this.tagStack.isEmpty()||this.tagStack.pop(),this.tagStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek()),this.contextStack.pop(),this.bracketSquareStack.pop()}handleBracketRoundOpen(){this.bracketRoundStack.push("BRACKET_ROUND_OPEN")}handleBracketRoundClose(){this.bracketRoundStack.pop()}handleDeclarationStatement(t){let r=t.value,i=this.declarationStack.pop(),s=this.declarationStack.pop().toLowerCase();s&&i&&r&&(this.declarations[s]||(this.declarations[s]={}),s==="configure"?this.declarations[s][i]=r:s==="reference"&&(this.declarations[s][i]||(this.declarations[s][i]=[]),Array.isArray(this.declarations[s][i])&&(this.declarations[s][i].includes(r)||this.declarations[s][i].push(r))),this.colonStack.pop(),this.contextStack.pop())}handleParameterStatement(t){let r=this.keyStack.pop();this.currentNode&&(this.currentNode.parameters||(this.currentNode.parameters={}),this.currentNode.parameters[r]=t.value,this.colonStack.pop())}handleStringLiteralStatement(t){let r=new q;r.value=t.value;let i=new w;if(this.tagStack.isEmpty())i.value="Line",i.htmlElement="div";else{let s=this.tagStack.isEmpty()?null:this.tagStack.peek();(s==null?void 0:s.value)==="List"?(i.value="ListItem",i.htmlElement="li"):(i.value="Line",i.htmlElement="div")}if(i.children.push(r),!this.currentNode)throw new Error("'currentNode' doesn't exist");this.currentNode.children.push(i),this.colonStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek(),this.colonStack.pop())}}});var U,wt=l(()=>{"use strict";C();E();st();j();U=class{constructor(t){this.metrics=new u("Syntax Checker");this.tokens=[];if(!t)throw new Error(d.ERR0007);this.tokens=t}checkSyntax(){let t=!1;return this.metrics.start(),t=this.checkBracketsBalance(),this.metrics.end(),t}checkBracketsBalance(){let t=new S;for(let r of this.tokens)if(r.type==="BRACKET_ROUND_OPEN")t.push(r.value);else if(r.type==="BRACKET_ROUND_CLOSE")if(t.peek()==="(")t.pop();else throw new Error(`Unmatched ) after Ln ${r.line}, Col ${r.column}`);else if(r.type==="BRACKET_SQUARE_OPEN")t.push(r.value);else if(r.type==="BRACKET_SQUARE_CLOSE")if(t.peek()==="[")t.pop();else throw new Error(`Unmatched ] after Ln ${r.line}, Col ${r.column}`);return!0}}});var bt={};k(bt,{default:()=>Y});var Y,vt=l(()=>{"use strict";C();E();Tt();xt();yt();wt();Y=class{constructor(){this.version="v0.3";this.repourl="https://github.com/M9J/texscript.git";this.metrics=new u("Texscript Compilation");this.rawCode="";this.tokens=null;this.ast=null;this.locCount=0;console.log(`[Texscript: Info] > Compiler ${this.version}`)}get lastCompilation(){return new Map([["tokens",this.tokens],["ast",this.ast]])}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:this.lastCompilation}}compile(t){if(!t)throw new Error(d.ERR0002);this.metrics.start(),this.rawCode=t;let i=new $(this.rawCode).preprocessCode(),s=new I(i),{tokens:o,locCount:a}=s.lexicalAnalysis();if(this.tokens=o,this.locCount=a,!new U(o).checkSyntax())throw new Error(d.ERR0026);let n=new H(o).syntaxAnalysis();return n.value="Program",n.meta.languageName="Texscript",n.meta.languageCompilerVersion=this.version,this.ast=n,this.metrics.end(),n}}});var K,At=l(()=>{"use strict";C();E();K=class{constructor(t){this.ast=null;this.metrics=new u("Texscript Code Generation");if(!t)throw new Error(d.ERR0009);this.ast=t}generateCodeForHTML(){if(!this.ast)throw new Error(d.ERR0009);let t="";this.metrics.start();for(let r of this.ast.body){let i=r.getNodeType();(i==="TAG"||i==="SPEC_TAG"||i==="LITERAL")&&(t+=this.generateHTMLForNode(r))}return this.metrics.end(),t.trim()}generateHTMLForNode(t){if(!t)throw new Error(d.ERR0010);let r=t.getNodeType(),i=t.value,s=t.htmlElement,o=t.htmlAttributes,a=t.parameters,c=t.customCSSClasses,p=t.children||[],m="",n="",g="";if(Array.isArray(c)&&c.length>0&&(m=` ${c.join(" ")}`),a)for(let f in a){let T=a[f];n+=` texscript-${i}-${f.toUpperCase()}-${T.toUpperCase()}`}if(o)for(let f in o){let T=o[f];g+=` ${f}="${T}"`}return r==="TAG"?`<${s} class="texscript-${i}${m}${n}" ${g}>
    ${p.filter(f=>{let T=f.getNodeType();return T==="TAG"||T==="SPEC_TAG"||T==="LITERAL"}).map(f=>this.generateHTMLForNode(f)).join("")}</${s}>`:r==="SPEC_TAG"?`<${s} class="texscript-${i}"/>`:r==="LITERAL"?`${i}`:""}}});function _(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}var G,Q=l(()=>{"use strict";E();G=class{constructor(){this.metricsCSSBuilder=new u("CSS Builder");this.CSSConfig={classes:{},globalRules:[]}}addStyle(t,r,i){this.CSSConfig.classes[t]||(this.CSSConfig.classes[t]={}),this.CSSConfig.classes[t][r]=i}addGlobalRule(t){this.CSSConfig.globalRules.push(t)}buildCSS(){this.metricsCSSBuilder.start();let t=Object.entries(this.CSSConfig.classes).map(([i,s])=>{let o=Object.entries(s).map(([a,c])=>`${a}: ${c};`).join(" ");return`${i} { ${o} }`}).join(`
`),r=this.CSSConfig.globalRules.join(`
`);return this.metricsCSSBuilder.end(),`${t}
${r}`}}});var X,Ot=l(()=>{"use strict";X={pageSize:"",pagePadding:"",lineHeight:"normal"}});function Lt(e,t="mm"){let r=Ce[e.toUpperCase()];if(!r)return null;switch(t){case"px":return{width:Math.round(r.width*3.779527),height:Math.round(r.height*3.779527)};case"in":return{width:parseFloat((r.width*Nt).toFixed(2)),height:parseFloat((r.height*Nt).toFixed(2))};case"mm":default:return r}}var Nt,Ce,Pt=l(()=>{"use strict";Nt=.0393701,Ce={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}}});async function Mt(e){if(e){await ke(e.pageSize),await xe(e.pagePadding),await Te(e.lineHeight);let t=B.buildCSS();_(t)}}async function Te(e=X.lineHeight){e&&B.addStyle(".texscript-Page","line-height",e)}async function xe(e=X.pagePadding){e&&e&&B.addStyle(".texscript-PageWrapper","padding",e)}async function ke(e=X.pageSize){if(e){let r=Lt(e,"in");r&&r.width&&r.height&&(B.addGlobalRule(`@media print { @page { size: ${e}} }`),B.addStyle(".texscript-PageWrapper","width",r.width+"in"),B.addStyle(".texscript-PageWrapper","height",r.height+"in"))}}var B,_t=l(()=>{"use strict";Ot();Pt();Q();B=new G});var ye,b,nt=l(()=>{"use strict";E();ye=["align-items","color","display","flex-direction","font-family","font-size","font-weight","justify-content","padding-left","text-align"],b=class{constructor(){this.metricsCSSFilterCompiler=new u("CSS Filter Compiler");this.allowedProperties=ye}compile(t){this.metricsCSSFilterCompiler.start();let r={classes:[],imports:[]},i=/@import\s+(?:url\()?["']?([^"')]+)["']?\)?\s*;/g,s;for(;(s=i.exec(t))!==null;){let c=s[1];typeof c=="string"&&c.trim()&&r.imports.push(c.trim())}let o=/((?:\.[a-zA-Z0-9_-]+\s*,?\s*)+)\{([^}]+)\}/g,a;for(;(a=o.exec(t))!==null;){let c=a[1],p=a[2],m=[];p&&p.split(";").forEach(n=>{let[g,f]=n.split(":").map(T=>T.trim());this.allowedProperties.includes(g)&&m.push({property:g,value:f})}),c&&c.split(",").map(g=>g.trim()).forEach(g=>{g.startsWith(".")&&r.classes.push({selector:g,declarations:[...m]})})}return this.metricsCSSFilterCompiler.end(),r}generateFilteredCSSContent(t){var s;if(!t)return"";let r=((s=t.imports)==null?void 0:s.map(o=>`@import url("${o}");`))||[],i=t.classes.map(o=>{let a=o.declarations.map(c=>`  ${c.property}: ${c.value};`).join(`
`);return`${o.selector} {
${a}
}`});return[...r,...i].join(`

`)}}});async function Bt(e){let t=new u("CSS File Loader");t.start();let r=[];for(let i of e)if(!r.includes(i)){let s=await fetch(i);if(s.status===404)throw new Error(d.ERR0022+": "+i);let o=await s.text();if(o){let a=new b,c=a.compile(o),p=a.generateFilteredCSSContent(c);_(p),r.push(i)}}t.end()}var Dt=l(()=>{"use strict";C();E();Q();nt()});function It(){for(let e of we){let t=document.createElement("link");t.rel="preconnect",t.href=e.href,e.crossorigin&&(t.crossOrigin="anonymous"),document.head.appendChild(t)}}var we,$t=l(()=>{"use strict";we=[{href:"https://fonts.googleapis.com",crossorigin:!1},{href:"https://fonts.gstatic.com",crossorigin:!0}]});var Ht,Ft=l(()=>{Ht="#TexscriptHostElement { position: relative; width: 100%; background-color: #252529; overflow: auto; box-sizing: border-box; margin: 0; padding: 0;}.reset * { box-sizing: border-box;}.display-none { display: none;}a { text-decoration: none; font-style: italic;}"});var Kt,Ut=l(()=>{Kt="@media print { body { background: #fff !important; margin: 0 !important; padding: 0 !important; } .texscript-pages-container { margin: 0 !important; padding: 0 !important; } .texscript-pages { gap: 0px !important; } .texscript-PageWrapper { box-shadow: none !important; page-break-after: always !important; break-after: page !important; page-break-inside: avoid !important; break-inside: avoid !important; } .texscript-Page { margin: 0 !important; box-shadow: none !important; } .texscript-PageBreak { page-break-before: always !important; break-before: page !important; display: block !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; } .page-break-after { page-break-after: always !important; break-after: page !important; } .avoid-break { page-break-inside: avoid !important; break-inside: avoid !important; }}"});var jt,Gt=l(()=>{jt=".texscript-pages-container { display: inline-block; margin: 24px;}.texscript-pages { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; justify-content: flex-start;}.texscript-PageWrapper { display: flex; flex-direction: column; background-color: #fff; box-sizing: border-box; box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.5); flex: 0 0 auto;}.texscript-Page { display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden;}.texscript-Line { display: block;}.texscript-HR { height: 1px; background: rgba(0, 0, 0, 0.1); margin: 8px 0;}"});var qt,zt=l(()=>{qt=".texscript-List-TYPE-BULLET .texscript-ListItem { list-style-type: disc;}.texscript-List-TYPE-NUMBER .texscript-ListItem { list-style-type: decimal;}"});var Wt,Yt=l(()=>{"use strict";Ft();Ut();Gt();zt();Wt=Ht+Kt+jt+qt});async function Qt(){await Ne(),await Le()}async function Ne(){try{let e=document.createElement("style");e.textContent=Wt,document.head.appendChild(e)}catch(e){h(e,"error")}}async function Le(){let e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.head.appendChild(e)}var Xt=l(()=>{"use strict";Yt();y()});var Jt={};k(Jt,{process:()=>Pe});async function Pe(e,t){try{Vt.start(),h("Compiling...");let r=e.compile(t);await Qt();let i=await J();if(i){let n=new b,g=n.compile(i),f=n.generateFilteredCSSContent(g);_(f)}if(r){let n=r.configurations;n&&(h("Loading configurations..."),await _e(n),R("95"));let g=r.references;g&&(h("Loading references..."),await Me(g),R("98"))}let o=new K(r).generateCodeForHTML();h("Compilation done.");let a=document.querySelector(".texscript-banner-container");a instanceof HTMLElement&&(a.style.display="none");let c=document.createElement("div");c.className="texscript-pages",c.innerHTML=o;let p=document.createElement("div");p.className="texscript-pages-container",p.classList.add("display-none"),p.appendChild(c);let m=v();m.innerHTML=p.outerHTML,await document.fonts.ready,p.classList.remove("display-none"),R("100"),window.TexscriptCompiler=e.toString(),Be(),Vt.end()}catch(r){h(r,"error")}}async function Me(e){e&&(It(),e.css&&await Bt(e.css))}async function _e(e){e&&await Mt(e)}function Be(){(!document.title||document.title.trim()==="")&&(document.title="Texscript | "+location.host+location.pathname);let e=document.documentElement;(!e.lang||e.lang.trim()==="")&&(e.lang="en");let t=document.querySelector('meta[name="description"]');t?(!t.content||t.content.trim()==="")&&(t.content="This page was compiled by Texscript Compiler"):(t=document.createElement("meta"),t.name="description",t.content="This page was compiled by Texscript Compiler",document.head.appendChild(t))}var Vt,Zt=l(()=>{"use strict";V();At();Q();_t();Dt();nt();E();$t();Z();Xt();y();Vt=new u("Texscript Process")});var te={};k(te,{load:()=>De});async function De(){try{let e=new u("Texscript Loader");e.start(),h("Getting handy tools..."),R("20");let t=await Promise.resolve().then(()=>(Z(),gt));h("Opening curse words..."),R("30");let r=await Promise.resolve().then(()=>(C(),ut));h("Loading brain power..."),R("50");let i=await Promise.resolve().then(()=>(vt(),bt)),s=new i.default,o=await Promise.resolve().then(()=>(Zt(),Jt));R("60"),h("Finding your story...");let a=await t.findCodeFromDOM();if(!a)throw new Error(r.default.ERR0001);R("90"),e.end(),o.process(s,a)}catch(e){h(e,"error")}}var ee=l(()=>{"use strict";E();y()});var ie={};k(ie,{hideSplashProgress:()=>re,loadSplash:()=>He,updateSplashProgress:()=>R,updateSplashStatus:()=>h});async function He(){try{R("8");let e=document.createElement("style");e.innerHTML=Fe,document.head.appendChild(e);let t=document.createElement("div");t.innerHTML=$e,v().appendChild(t),h("Fetching Texscript Loader...");let i=await Promise.resolve().then(()=>(ee(),te));R("10"),h("Fetched Texscript Loader"),h("Loading Texscript modules..."),await i.load()}catch(e){h(e,"error")}}function h(e,t){let r="";t==="error"?r=(o=>`<div class="texscript-splash-status-${o}">${e.toString().replaceAll(`
`,"<br/>")}</div>`)("error"):r=`<div>${e}</div>`;let i=document.getElementById("texscript-splash-status");if(i&&(o=>{i.innerHTML+=o})(r),t&&["error"].includes(t)){let s=document.getElementById("texscript-splash");s&&(s.style.display="flex")}t==="error"&&console.error(e)}function R(e){if(e){let t=document.getElementById("texscript-splash-progress");t&&t.setAttribute("value",e),parseInt(e)>99&&re()}}function re(){let e=document.getElementById("texscript-splash-progress");e&&(e.style.display="none")}var Ie,$e,Fe,y=l(()=>{"use strict";V();pt();Ie='Texscript Markup Language [Version 0.3]<br/>Free and Open Source. Licensed under GPL-3.0.<br/>Hosted on GitHub: <a href="https://github.com/M9J/texscript.git">texscript.git</a>',$e=`
<div class="texscript-splash-container" id="texscript-splash">
  <div class="texscript-splash">
    <div>${Ie}</div>
    <br/><hr/><br/>
    <div id="texscript-splash-status"></div>
  </div>
</div>
`,Fe=dt});var se={};k(se,{load:()=>Ke});async function Ke(){let e=v(),t=document.createElement("style");t.textContent=Ue,document.head.appendChild(t);let r=document.createElement("progress");r.setAttribute("class","texscript-splash-progress-bar"),r.setAttribute("id","texscript-splash-progress"),r.setAttribute("value","0"),r.setAttribute("max","100"),e.appendChild(r),r.setAttribute("value","2");let i=await Promise.resolve().then(()=>(y(),ie));r.setAttribute("value","5"),await i.loadSplash()}var Ue,ne=l(()=>{"use strict";V();ct();Ue=lt});function v(){let e=document.querySelector("[data-texscript-host]");return e||document.body}var V=l(()=>{document.addEventListener("DOMContentLoaded",async()=>{if(window.__texscript_loaded__)return;window.__texscript_loaded__=!0;let e=v();e instanceof HTMLElement&&(e.setAttribute("id","TexscriptHostElement"),e.classList.add("reset"),e instanceof HTMLBodyElement||(e.innerHTML=""),e.style.background="#252529",e.style.margin="0px",e.style.padding="0px"),(await Promise.resolve().then(()=>(ne(),se))).load()})});V();})();
