"use strict";(()=>{var se=Object.defineProperty;var et=e=>{throw TypeError(e)};var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var A=(e,t)=>{for(var r in t)se(e,r,{get:t[r],enumerable:!0})};var rt=(e,t,r)=>t.has(e)||et("Cannot "+r);var T=(e,t,r)=>(rt(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>t.has(e)?et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,s)=>(rt(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var it,st=c(()=>{it="progress.texscript-splash-progress-bar { width: 100%; height: 4px; position: sticky; top: 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); appearance: none; block-size: 4px; vertical-align: top;}progress.texscript-splash-progress-bar::-webkit-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-moz-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-webkit-progress-value { background-color: #2196f3;}progress.texscript-splash-progress-bar::-webkit-progress-value { transition: width 1s ease-in-out;}"});var ot,nt=c(()=>{ot=".texscript-splash-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; background: #252529; margin: 0; box-sizing: border-box; display: none;}.texscript-splash { font-family: monospace; background: #fff; color: #000; padding: 16px; box-shadow: -4px -8px 16px rgba(0, 0, 0, 0.5); box-sizing: border-box;}.texscript-splash-status { overflow: auto;}.texscript-splash-status-error { color: #a00;}"});var at={};A(at,{default:()=>l});var oe,l,E=c(()=>{"use strict";oe={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;',ERR0021:"External Texscript source code not found",ERR0022:"External CSS file not found",ERR0023:"'characterStream' not provided"},l=oe});var M,O,N,p,f=c(()=>{"use strict";E();k();p=class{constructor(t){b(this,M,null);b(this,O,null);b(this,N,null);if(!t)throw new Error(l.ERR0013);v(this,M,t)}start(){v(this,O,performance.now())}end(){v(this,N,performance.now());let t=this.getFormattedTime(),r=`[Texscript: Metrics] > ${T(this,M)} finished in ${t}`;console.log(r),d(r)}getTotalTimeMilliseconds(){return T(this,N)&&T(this,O)?T(this,N)-T(this,O):0}getFormattedTime(){let t=this.getTotalTimeMilliseconds();return t<1e3?`${t.toFixed(3)}ms`:`${(t/1e3).toFixed(3)}s`}};M=new WeakMap,O=new WeakMap,N=new WeakMap});var pt={};A(pt,{findCodeFromDOM:()=>ae});async function ae(){try{let e=[],t=document.querySelectorAll('script[type="text/texscript"]');if(!t)throw new Error(l.ERR0003);if(t.length>1)for(let i of Array.from(t)){let o=await lt(i);o&&e.push(o)}else{let i=t[0];if(i){let o=await lt(i);o&&e.push(o)}}if(!(e.length>0))throw new Error(l.ERR0014);return e.join(`
`)}catch(e){d(e,"error")}}async function lt(e){var o;if(!e)throw new Error(l.ERR0016);let t=(o=e.innerText)!=null?o:null,r=e.getAttribute("src");if(!t&&!r)throw new Error(l.ERR0020);let s=null,i=null;if(t&&(s=t.trim(),!s))throw new Error(l.ERR0014);if(r&&!ct.includes(r)){let a=await fetch(r);if(a.status===404)throw new Error(l.ERR0021+": "+r);if(i=(await a.text()).trim(),i)ct.push(r);else throw new Error(l.ERR0014)}if(s&&i)return`${s}
${i}`;if(s)return s;if(i)return i}var ct,dt=c(()=>{"use strict";E();k();ct=[]});function he(e,t){let r=new Map;for(let s of e){let i=s.split("|").map(a=>{let n=t[a];if(!n)throw new Error(`Unknown token: ${a}`);return n.source}),o=new RegExp(i.join(""));r.set(s,o)}return r}var ce,le,pe,de,ue,me,ut,mt=c(()=>{"use strict";ce={KEYWORD:/(^[A-Z][a-z]*)/,STRING:/"(.*)"$|(\\\"(.*)\\\"$)/},le={CSS_CLASS:/\.([a-z]+[a-zA-Z]*)/,COMMAND:/(@[A-Z][a-zA-Z]*\s[\s\w]+:\s*("[^"]*"|\w+))/,PARAMETERS:/(\(([\s\w]+:\s*("[^"]*"|\w+),?\s*)+\))/,URL:/^\"(?:https?:\/\/|\/\/|www\.)?[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(?:\.[a-zA-Z]{2,})?\"$/,MAIL:/^\"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\"$/},pe={BRACKET_SQUARE_CLOSE:/(\])/,BRACKET_SQUARE_OPEN:/(\[)/,COLON:/(:)/,SPACE:/(\s*)/,WHITESPACE:/(\s)/,BRACKET_ANGLE_CLOSE:/(\>)/,DOUBLE_QUOTE:/(\")/},de={BR:/(::)/,HR:/(--)/},ue={...ce,...le,...pe,...de},me=["BR","BRACKET_SQUARE_CLOSE","COMMAND","HR","MAIL","KEYWORD|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|CSS_CLASS|SPACE|PARAMETERS|COLON|SPACE|STRING","KEYWORD|CSS_CLASS|SPACE|PARAMETERS|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|SPACE|BRACKET_SQUARE_OPEN","KEYWORD|SPACE|PARAMETERS","KEYWORD|SPACE|PARAMETERS|COLON|SPACE|STRING","KEYWORD|SPACE|PARAMETERS|SPACE|BRACKET_SQUARE_OPEN","URL","STRING"];ut=he(me,ue)});var Q=c(()=>{"use strict"});function Se(e){return/^[0-9]$/.test(e)}function fe(e){return/^[A-Z]$/.test(e)}function Ee(e){return/^[a-z]$/.test(e)}function L(e){return/^ $/.test(e)}function Re(e){return/^\($/.test(e)}function Z(e){return/^\)$/.test(e)}function X(e){return/^\[$/.test(e)}function Ce(e){return/^\]$/.test(e)}function V(e){return/^\:$/.test(e)}function ht(e){return/^\,$/.test(e)}function Te(e){return/^\$$/.test(e)}function xe(e){return/^\@$/.test(e)}function gt(e){return/^\/$/.test(e)}function St(e){return/^\.$/.test(e)}function ft(e){return/^\"$/.test(e)}function Ae(e){return/^$/.test(e)}function J(e){return/^\n$/.test(e)}var D,Et=c(()=>{"use strict";E();f();Q();D=class{constructor(t){this.metrics=new p("PrePrecessor");this.characterStream=[];if(!t)throw new Error(l.ERR0023);this.characterStream=t}lexicalAnalysis(){this.metrics.start();let t=[],r=0,s=0,i="",o=this.characterStream.length;for(let a=0;a<o+1;a++){let n=this.characterStream[a]||"";switch(s){case 0:{if(L(n))continue;if(J(n)){r++;continue}else Z(n)?(s=1,a--):Re(n)?s=2:Ce(n)?(s=3,a--):X(n)?s=4:V(n)?s=5:ht(n)?s=6:Te(n)?s=9:xe(n)?s=10:gt(n)?s=11:St(n)?s=12:Ee(n)?(s=7,a--):Se(n)?s=13:fe(n)?(s=8,a--):ft(n)?s=14:Ae(n)?s=15:s=16;break}case 1:{t.push({type:"BRACKET_ROUND_CLOSE",value:")"}),s=0;break}case 2:{t.push({type:"BRACKET_ROUND_OPEN",value:"("}),s=0,a--;break}case 3:{t.push({type:"BRACKET_SQUARE_CLOSE",value:"]"}),s=0;break}case 4:{t.push({type:"BRACKET_SQUARE_OPEN",value:"["}),s=0,a--;break}case 5:{t.push({type:"COLON",value:":"}),s=0,a--;break}case 6:{t.push({type:"COMMA",value:","}),s=0;break}case 9:{L(n)||Z(n)||J(n)||ht(n)?(t.push({type:"CONSTANT",value:i}),i="",s=0,a--):i+=n;break}case 10:{L(n)?(t.push({type:"DECLARATION",value:i}),i="",s=0):i+=n;break}case 11:{gt(n)?(t.push({type:"DECORATOR",value:i}),i="",s=0):i+=n;break}case 12:{t.push({type:"DOT",value:"."}),s=0,a--;break}case 15:{i="",s=15;break}case 16:throw new Error("Error happened during lexical analysis");case 7:{L(n)||V(n)||X(n)||Z(n)?(t.push({type:"IDENTIFIER",value:i}),i="",s=0,a--):i+=n;break}case 13:{i+=n,L(n)&&(t.push({type:"INTEGER",value:i}),i="",s=0);break}case 8:{L(n)||V(n)||St(n)||J(n)||X(n)?(t.push({type:"KEYWORD",value:i}),i="",s=0,a--):i+=n;break}case 14:{ft(n)?(t.push({type:"STRING",value:i}),i="",s=0):i+=n;break}}}return t.length&&!r&&++r,this.metrics.end(),{tokens:t,locCount:r}}}});var B,Rt=c(()=>{"use strict";E();f();B=class{constructor(t){this.metrics=new p("PrePrecessor");this.rawCode="";if(!t)throw new Error(l.ERR0002);this.rawCode=t}preprocessCode(){this.metrics.start();let t=this.trim(this.rawCode),r=this.normalize(t),s=this.convertToCharacterStream(r);return this.metrics.end(),s}convertToCharacterStream(t){return t.split("")}normalize(t){return t.replace(/\r/gi,"")}trim(t){return t.trim()}}});var I,P,H,w,G,z,Ct=c(()=>{"use strict";P=class{constructor(t){b(this,I,null);v(this,I,t)}getNodeType(){return T(this,I)}};I=new WeakMap;H=class extends P{constructor(){super("ROOT");this.value=null;this.meta={};this.body=[];this.references={};this.configurations={}}},w=class extends P{constructor(){super("TAG");this.value=null;this.htmlElement=null;this.customCSSClasses=[];this.parameters={};this.children=[];this.htmlAttributes={}}},G=class extends P{constructor(){super("LITERAL");this.value=null}},z=class extends P{constructor(){super("SPEC_TAG");this.htmlElement=null;this.value=null}}});var g,Tt=c(()=>{"use strict";g=class{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return this.items.length===0}peek(){return this.isEmpty()?null:this.items[this.items.length-1]}}});var $,xt=c(()=>{"use strict";E();f();Ct();Tt();Q();$=class{constructor(t){this.metrics=new p("PrePrecessor");this.tokens=[];this.ast=new H;this.declarations={configure:{},reference:{}};this.declarationStack=new g;this.contextStack=new g;this.tagStack=new g;this.bracketRoundStack=new g;this.bracketSquareStack=new g;this.colonStack=new g;this.dotStack=new g;this.keyStack=new g;this.currentNode=null;if(!t)throw new Error(l.ERR0007);this.tokens=t}syntaxAnalysis(){this.metrics.start();for(let[t,r]of Object.entries(this.tokens))switch(r.type){case"BRACKET_ROUND_CLOSE":this.handleBracketRoundClose();break;case"BRACKET_ROUND_OPEN":this.handleBracketRoundOpen();break;case"BRACKET_SQUARE_CLOSE":this.handleBracketSquareClose();break;case"BRACKET_SQUARE_OPEN":this.handleBracketSquareOpen();break;case"COLON":this.handleColon(r);break;case"COMMA":continue;case"CONSTANT":this.handleConstant(r);break;case"DECLARATION":this.handleDeclaration(r);break;case"DECORATOR":this.handleDecorator(r);break;case"DOT":this.handleDot();break;case"IDENTIFIER":this.handleIdentifier(r);break;case"INTEGER":continue;case"KEYWORD":this.handleKeyword(r);break;case"STRING":this.handleString(r);break}return this.ast.configurations=this.declarations.configure,this.ast.references=this.declarations.reference,this.metrics.end(),this.ast}handleString(t){let r=this.contextStack.peek()==="DECLARATION",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):s?this.handleParameterStatement(t):this.handleStringLiteralStatement(t)}handleKeyword(t){this.contextStack.push("KEYWORD");let r=new w;if(r.value=t.value,r.htmlElement="div",t.value==="Section"?r.htmlElement="section":t.value==="List"&&(r.htmlElement="ul"),this.currentNode=r,this.tagStack.isEmpty()){if(this.ast.body.length>0){let i=new w;i.value="PageBreak",i.htmlElement="div",this.ast.body.push(i)}let s=new w;s.value="PageWrapper",s.htmlElement="div",s.children.push(this.currentNode),this.ast.body.push(s)}else{let s=this.tagStack.isEmpty()?null:this.tagStack.peek();s&&s.children&&s.children.push(this.currentNode)}}handleIdentifier(t){var o;let r=this.contextStack.peek()==="DECLARATION",s=this.contextStack.peek()==="KEYWORD"&&this.dotStack.peek()==="DOT",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN";r?this.declarationStack.push(t.value):s?((o=this.currentNode)==null||o.customCSSClasses.push(t.value),this.dotStack.pop()):i&&this.keyStack.push(t.value)}handleDot(){this.contextStack.peek()==="KEYWORD"&&this.dotStack.push("DOT")}handleDecorator(t){var o;let r=new z,s=/\:+/.test(t.value),i=/\-+/.test(t.value);s?(r.htmlElement="br",r.value="BR"):i&&(r.htmlElement="hr",r.value="HR"),(o=this.currentNode)==null||o.children.push(r)}handleDeclaration(t){this.contextStack.push("DECLARATION"),this.declarationStack.push(t.value)}handleConstant(t){let r=this.contextStack.peek()==="DECLARATION",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):s&&this.handleParameterStatement(t)}handleColon(t){this.colonStack.push(t.value)}handleBracketSquareOpen(){this.bracketSquareStack.push("BRACKET_SQUARE_OPEN"),this.currentNode&&this.tagStack.push(this.currentNode)}handleBracketSquareClose(){this.tagStack.isEmpty()||this.tagStack.pop(),this.tagStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek()),this.contextStack.pop(),this.bracketSquareStack.pop()}handleBracketRoundOpen(){this.bracketRoundStack.push("BRACKET_ROUND_OPEN")}handleBracketRoundClose(){this.bracketRoundStack.pop()}handleDeclarationStatement(t){let r=t.value,s=this.declarationStack.pop(),i=this.declarationStack.pop().toLowerCase();i&&s&&r&&(this.declarations[i]||(this.declarations[i]={}),i==="configure"?this.declarations[i][s]=r:i==="reference"&&(this.declarations[i][s]||(this.declarations[i][s]=[]),Array.isArray(this.declarations[i][s])&&(this.declarations[i][s].includes(r)||this.declarations[i][s].push(r))),this.colonStack.pop(),this.contextStack.pop())}handleParameterStatement(t){let r=this.keyStack.pop();this.currentNode&&(this.currentNode.parameters||(this.currentNode.parameters={}),this.currentNode.parameters[r]=t.value,this.colonStack.pop())}handleStringLiteralStatement(t){let r=new G;r.value=t.value;let s=new w;if(this.tagStack.isEmpty())s.value="Line",s.htmlElement="div";else{let i=this.tagStack.isEmpty()?null:this.tagStack.peek();(i==null?void 0:i.value)==="List"?(s.value="ListItem",s.htmlElement="li"):(s.value="Line",s.htmlElement="div")}if(s.children.push(r),!this.currentNode)throw new Error("'currentNode' doesn't exist");this.currentNode.children.push(s),this.colonStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek(),this.colonStack.pop())}}});var At={};A(At,{default:()=>W});var W,kt=c(()=>{"use strict";E();f();mt();Et();Rt();xt();W=class{constructor(){this.version="v0.2";this.repourl="https://github.com/M9J/texscript.git";this.metrics=new p("Texscript Compilation");this.rawCode="";this.loc=null;this.tokens=null;this.ast=null;this.locCount=0;console.log(`[Texscript: Info] > Compiler ${this.version}`)}get lastCompilation(){return new Map([["loc",this.loc],["tokens",this.tokens],["ast",this.ast]])}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:this.lastCompilation,grammar:ut}}compile(t){if(!t)throw new Error(l.ERR0002);this.metrics.start(),this.rawCode=t;let s=new B(this.rawCode).preprocessCode(),i=new D(s),{tokens:o,locCount:a}=i.lexicalAnalysis();this.tokens=o,this.locCount=a;let u=new $(o).syntaxAnalysis();return u.value="Program",u.meta.languageName="Texscript",u.meta.languageCompilerVersion=this.version,this.metrics.end(),u}generateCodeFor(t){return t+""}}});function j(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}var K,tt=c(()=>{"use strict";f();K=class{constructor(){this.metricsCSSBuilder=new p("CSS Builder");this.CSSConfig={classes:{},globalRules:[]}}addStyle(t,r,s){this.CSSConfig.classes[t]||(this.CSSConfig.classes[t]={}),this.CSSConfig.classes[t][r]=s}addGlobalRule(t){this.CSSConfig.globalRules.push(t)}buildCSS(){this.metricsCSSBuilder.start();let t=Object.entries(this.CSSConfig.classes).map(([s,i])=>{let o=Object.entries(i).map(([a,n])=>`${a}: ${n};`).join(" ");return`${s} { ${o} }`}).join(`
`),r=this.CSSConfig.globalRules.join(`
`);return this.metricsCSSBuilder.end(),`${t}
${r}`}}});var Y,wt=c(()=>{"use strict";Y={pageSize:"",pagePadding:"",lineHeight:"normal"}});function bt(e,t="mm"){let r=ke[e.toUpperCase()];if(!r)return null;switch(t){case"px":return{width:Math.round(r.width*3.779527),height:Math.round(r.height*3.779527)};case"in":return{width:parseFloat((r.width*yt).toFixed(2)),height:parseFloat((r.height*yt).toFixed(2))};case"mm":default:return r}}var yt,ke,vt=c(()=>{"use strict";yt=.0393701,ke={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}}});async function Ot(e){if(e){await be(e.pageSize),await ye(e.pagePadding),await we(e.lineHeight);let t=_.buildCSS();j(t)}}async function we(e=Y.lineHeight){e&&_.addStyle(".texscript-Page","line-height",e)}async function ye(e=Y.pagePadding){e&&e&&_.addStyle(".texscript-PageWrapper","padding",e)}async function be(e=Y.pageSize){if(e){let r=bt(e,"in");r&&r.width&&r.height&&(_.addGlobalRule(`@media print { @page { size: ${e}} }`),_.addStyle(".texscript-PageWrapper","width",r.width+"in"),_.addStyle(".texscript-PageWrapper","height",r.height+"in"))}}var _,Nt=c(()=>{"use strict";tt();wt();vt();_=new K});function Lt(){for(let e of ve){let t=document.createElement("link");t.rel="preconnect",t.href=e.href,e.crossorigin&&(t.crossOrigin="anonymous"),document.head.appendChild(t)}}var ve,Pt=c(()=>{"use strict";ve=[{href:"https://fonts.googleapis.com",crossorigin:!1},{href:"https://fonts.gstatic.com",crossorigin:!0}]});var Oe,F,_t=c(()=>{"use strict";f();Oe=["align-items","color","display","flex-direction","font-family","font-size","font-weight","justify-content","padding-left","text-align"],F=class{constructor(){this.metricsCSSFilterCompiler=new p("CSS Filter Compiler");this.allowedProperties=Oe}compile(t){this.metricsCSSFilterCompiler.start();let r={classes:[],imports:[]},s=/@import\s+(?:url\()?["']?([^"')]+)["']?\)?\s*;/g,i;for(;(i=s.exec(t))!==null;){let n=i[1];typeof n=="string"&&n.trim()&&r.imports.push(n.trim())}let o=/((?:\.[a-zA-Z0-9_-]+\s*,?\s*)+)\{([^}]+)\}/g,a;for(;(a=o.exec(t))!==null;){let n=a[1],u=a[2],x=[];u&&u.split(";").forEach(C=>{let[m,S]=C.split(":").map(R=>R.trim());this.allowedProperties.includes(m)&&x.push({property:m,value:S})}),n&&n.split(",").map(m=>m.trim()).forEach(m=>{m.startsWith(".")&&r.classes.push({selector:m,declarations:[...x]})})}return this.metricsCSSFilterCompiler.end(),r}generateFilteredCSSContent(t){var i;if(!t)return"";let r=((i=t.imports)==null?void 0:i.map(o=>`@import url("${o}");`))||[],s=t.classes.map(o=>{let a=o.declarations.map(n=>`  ${n.property}: ${n.value};`).join(`
`);return`${o.selector} {
${a}
}`});return[...r,...s].join(`

`)}}});async function Mt(e){let t=new p("CSS File Loader");t.start();let r=[];for(let s of e)if(!r.includes(s)){let i=await fetch(s);if(i.status===404)throw new Error(l.ERR0022+": "+s);let o=await i.text();if(o){let a=new F,n=a.compile(o),u=a.generateFilteredCSSContent(n);j(u),r.push(s)}}t.end()}var Dt=c(()=>{"use strict";f();E();tt();_t()});var It,Bt=c(()=>{It="#TexscriptHostElement { position: relative; width: 100%; background-color: #252529; overflow: auto; box-sizing: border-box; margin: 0; padding: 0; }.reset * { box-sizing: border-box; }.display-none { display: none;}a { text-decoration: none; font-style: italic;}"});var Kt,$t=c(()=>{Kt="@media print { body { background: #fff !important; margin: 0 !important; padding: 0 !important; } .texscript-pages-container { margin: 0 !important; padding: 0 !important; } .texscript-pages { gap: 0px !important; } .texscript-PageWrapper { box-shadow: none !important; page-break-after: always !important; break-after: page !important; page-break-inside: avoid !important; break-inside: avoid !important; } .texscript-Page { margin: 0 !important; box-shadow: none !important; } .texscript-PageBreak { page-break-before: always !important; break-before: page !important; display: block !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; } .page-break-after { page-break-after: always !important; break-after: page !important; } .avoid-break { page-break-inside: avoid !important; break-inside: avoid !important; }}"});var Ut,Ft=c(()=>{Ut=".texscript-pages-container { display: inline-block; margin: 24px; }.texscript-pages { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; justify-content: flex-start;}.texscript-PageWrapper { display: flex; flex-direction: column; background-color: #fff; box-sizing: border-box; box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.5); flex: 0 0 auto; }.texscript-Page { display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden; }.texscript-Line { display: block; }.texscript-HR { height: 1px; background: rgba(0, 0, 0, 0.1); margin: 8px 0; }"});var Gt,Ht=c(()=>{Gt=".texscript-List-TYPE-BULLET .texscript-ListItem { list-style-type: disc; }.texscript-List-TYPE-NUMBER .texscript-ListItem { list-style-type: decimal; }"});var zt,Wt=c(()=>{"use strict";Bt();$t();Ft();Ht();zt=It+Kt+Ut+Gt});async function jt(){await Me(),await De()}async function Me(){try{let e=document.createElement("style");e.textContent=zt,document.head.appendChild(e)}catch(e){d(e,"error")}}async function De(){let e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.head.appendChild(e)}var Yt=c(()=>{"use strict";k();Wt()});var U,qt=c(()=>{"use strict";E();f();U=class{constructor(t){this.ast=null;this.metrics=new p("Texscript Code Generation");if(!t)throw new Error(l.ERR0009);this.ast=t}generateCodeForHTML(){if(!this.ast)throw new Error(l.ERR0009);let t="";this.metrics.start();for(let r of this.ast.body){let s=r.getNodeType();(s==="TAG"||s==="SPEC_TAG"||s==="LITERAL")&&(t+=this.generateHTMLForNode(r))}return this.metrics.end(),t.trim()}generateHTMLForNode(t){if(!t)throw new Error(l.ERR0010);let r=t.getNodeType(),s=t.value,i=t.htmlElement,o=t.htmlAttributes,a=t.parameters,n=t.customCSSClasses,u=t.children||[],x="",C="",m="";if(Array.isArray(n)&&n.length>0&&(x=` ${n.join(" ")}`),a)for(let S in a){let R=a[S];C+=` texscript-${s}-${S.toUpperCase()}-${R.toUpperCase()}`}if(o)for(let S in o){let R=o[S];m+=` ${S}="${R}"`}return r==="TAG"?`<${i} class="texscript-${s}${x}${C}" ${m}>
    ${u.filter(S=>{let R=S.getNodeType();return R==="TAG"||R==="SPEC_TAG"||R==="LITERAL"}).map(S=>this.generateHTMLForNode(S)).join("")}</${i}>`:r==="SPEC_TAG"?`<${i} class="texscript-${s}"/>`:r==="LITERAL"?`${s}`:""}}});var Qt={};A(Qt,{process:()=>Be});async function Be(e,t){try{let r=new p("Texscript Process");r.start(),d("Compiling...");let s=e.compile(t);if(await jt(),s){let C=s.configurations;C&&(d("Loading configurations..."),await $e(C),h("95"));let m=s.references;m&&(d("Loading references..."),await Ie(m),h("98"))}let o=new U(s).generateCodeForHTML();d("Compilation done.");let a=document.querySelector(".texscript-banner-container");a instanceof HTMLElement&&(a.style.display="none");let n=document.createElement("div");n.className="texscript-pages",n.innerHTML=o;let u=document.createElement("div");u.className="texscript-pages-container",u.classList.add("display-none"),u.appendChild(n);let x=y();x.innerHTML=u.outerHTML,await document.fonts.ready,u.classList.remove("display-none"),h("100"),r.end(),window.TexscriptCompiler=e.toString(),Ke()}catch(r){d(r,"error")}}async function Ie(e){e&&(Lt(),e.css&&await Mt(e.css))}async function $e(e){e&&await Ot(e)}function Ke(){(!document.title||document.title.trim()==="")&&(document.title="Texscript | "+location.host+location.pathname);let e=document.documentElement;(!e.lang||e.lang.trim()==="")&&(e.lang="en");let t=document.querySelector('meta[name="description"]');t?(!t.content||t.content.trim()==="")&&(t.content="This page was compiled by Texscript Compiler"):(t=document.createElement("meta"),t.name="description",t.content="This page was compiled by Texscript Compiler",document.head.appendChild(t))}var Zt=c(()=>{"use strict";q();f();Nt();Pt();Dt();k();Yt();qt()});var Xt={};A(Xt,{load:()=>Fe});async function Fe(){try{let e=new p("Texscript Loader");e.start(),d("Getting handy tools..."),h("20");let t=await Promise.resolve().then(()=>(dt(),pt));d("Opening curse words..."),h("30");let r=await Promise.resolve().then(()=>(E(),at));d("Loading brain power..."),h("50");let s=await Promise.resolve().then(()=>(kt(),At)),i=new s.default,o=await Promise.resolve().then(()=>(Zt(),Qt));h("60"),d("Finding your story...");let a=await t.findCodeFromDOM();if(!a)throw new Error(r.default.ERR0001);h("90"),e.end(),o.process(i,a)}catch(e){d(e,"error")}}var Vt=c(()=>{"use strict";f();k()});var te={};A(te,{hideSplashProgress:()=>Jt,loadSplash:()=>ze,updateSplashProgress:()=>h,updateSplashStatus:()=>d});async function ze(){try{h("8");let e=document.createElement("style");e.innerHTML=Ge,document.head.appendChild(e);let t=document.createElement("div");t.innerHTML=He,y().appendChild(t),d("Fetching Texscript Loader...");let s=await Promise.resolve().then(()=>(Vt(),Xt));h("10"),d("Fetched Texscript Loader"),d("Loading Texscript modules..."),await s.load()}catch(e){d(e,"error")}}function d(e,t){let r="";t==="error"?r=(o=>`<div class="texscript-splash-status-${o}">${e.toString().replaceAll(`
`,"<br/>")}</div>`)("error"):r=`<div>${e}</div>`;let s=document.getElementById("texscript-splash-status");if(s&&(o=>{s.innerHTML+=o})(r),t&&["error"].includes(t)){let i=document.getElementById("texscript-splash");i&&(i.style.display="flex")}t==="error"&&console.error(e)}function h(e){if(e){let t=document.getElementById("texscript-splash-progress");t&&t.setAttribute("value",e),parseInt(e)>99&&Jt()}}function Jt(){let e=document.getElementById("texscript-splash-progress");e&&(e.style.display="none")}var Ue,He,Ge,k=c(()=>{"use strict";q();nt();Ue='Texscript Markup Language [Version 0.2]<br/>Free and Open Source. Licensed under GPL-3.0.<br/>Hosted on GitHub: <a href="https://github.com/M9J/texscript.git">texscript.git</a>',He=`
<div class="texscript-splash-container" id="texscript-splash">
  <div class="texscript-splash">
    <div>${Ue}</div>
    <br/><hr/><br/>
    <div id="texscript-splash-status"></div>
  </div>
</div>
`,Ge=ot});var ee={};A(ee,{load:()=>je});async function je(){let e=y(),t=document.createElement("style");t.textContent=We,document.head.appendChild(t);let r=document.createElement("progress");r.setAttribute("class","texscript-splash-progress-bar"),r.setAttribute("id","texscript-splash-progress"),r.setAttribute("value","0"),r.setAttribute("max","100"),e.appendChild(r),r.setAttribute("value","2");let s=await Promise.resolve().then(()=>(k(),te));r.setAttribute("value","5"),await s.loadSplash()}var We,re=c(()=>{"use strict";q();st();We=it});function y(){let e=document.querySelector("[data-texscript-host]");return e||document.body}var q=c(()=>{document.addEventListener("DOMContentLoaded",async()=>{if(window.__texscript_loaded__)return;window.__texscript_loaded__=!0;let e=y();e instanceof HTMLElement&&(e.setAttribute("id","TexscriptHostElement"),e.classList.add("reset"),e instanceof HTMLBodyElement||(e.innerHTML=""),e.style.background="#252529",e.style.margin="0px",e.style.padding="0px"),(await Promise.resolve().then(()=>(re(),ee))).load()})});q();})();
