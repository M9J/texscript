"use strict";(()=>{var ce=Object.defineProperty;var st=e=>{throw TypeError(e)};var l=(e,t)=>()=>(e&&(t=e(e=0)),t);var k=(e,t)=>{for(var r in t)ce(e,r,{get:t[r],enumerable:!0})};var nt=(e,t,r)=>t.has(e)||st("Cannot "+r);var x=(e,t,r)=>(nt(e,t,"read from private field"),r?r.call(e):t.get(e)),A=(e,t,r)=>t.has(e)?st("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),N=(e,t,r,i)=>(nt(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var at,ot=l(()=>{at="progress.texscript-splash-progress-bar { width: 100%; height: 4px; position: sticky; top: 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); appearance: none; block-size: 4px; vertical-align: top;}progress.texscript-splash-progress-bar::-webkit-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-moz-progress-bar { background-color: #252529;}progress.texscript-splash-progress-bar::-webkit-progress-value { background-color: #2196f3;}progress.texscript-splash-progress-bar::-webkit-progress-value { transition: width 1s ease-in-out;}"});var lt,ct=l(()=>{lt=".texscript-splash-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; background: #252529; margin: 0; box-sizing: border-box; display: none;}.texscript-splash { font-family: monospace; background: #fff; color: #000; padding: 16px; box-shadow: -4px -8px 16px rgba(0, 0, 0, 0.5); box-sizing: border-box;}.texscript-splash-status { overflow: auto;}.texscript-splash-status-error { color: #a00;}"});var pt={};k(pt,{default:()=>p});var de,p,E=l(()=>{"use strict";de={ERR0001:"Unable to find the raw code to be compiled",ERR0002:"'rawCode' not provided",ERR0003:'Make sure the code is wrapped in &lt;script type="text/texscript">...&lt;/script&gt;',ERR0004:"'codeLOC' not provided",ERR0005:"'rule' not provided",ERR0006:"'matches' not provided",ERR0007:"'tokens' not provided",ERR0008:"token.type is null",ERR0009:"'ast' is not provided",ERR0010:"'node' is not provided",ERR0011:"'lang' is not provided",ERR0012:"Code generator for mentioned language is not provided",ERR0013:"'metricsName' not provided",ERR0014:"Unable to find any code written in Texscript",ERR0015:"Not able to find any Texscript code inside &lt;script&gt; element",ERR0016:"&lt;script&gt; element not found",ERR0017:"Compilation failed",ERR0018:"Dependency not found",ERR0019:"Unable to find any Texscript source URL inside &lt;script&gt; element",ERR0020:'Texscript code should be provided inside &lt;script type="text/texscript">...&lt;/script&gt; or as URL using &lt;script src="file.txs" type="text/texscript">&lt;/script&gt;',ERR0021:"External Texscript source code not found",ERR0022:"External CSS file not found",ERR0023:"'characterStream' not provided",ERR0024:"Missing closing round bracket",ERR0025:"Missing closing square bracket",ERR0026:"Syntax is wrong. Kindly recheck your code",ERR0027:"Missing opening round bracket",ERR0028:"Missing opening square bracket"},p=de});var _,O,L,m,f=l(()=>{"use strict";E();w();m=class{constructor(t){A(this,_,null);A(this,O,null);A(this,L,null);if(!t)throw new Error(p.ERR0013);N(this,_,t)}start(){N(this,O,performance.now())}end(){N(this,L,performance.now());let t=this.getFormattedTime(),r=`[Texscript: Metrics] > ${x(this,_)} finished in ${t}`;console.log(r),h(r)}getTotalTimeMilliseconds(){return x(this,L)&&x(this,O)?x(this,L)-x(this,O):0}getFormattedTime(){let t=this.getTotalTimeMilliseconds();return t<1e3?`${t.toFixed(3)}ms`:`${(t/1e3).toFixed(3)}s`}};_=new WeakMap,O=new WeakMap,L=new WeakMap});var mt={};k(mt,{findCodeFromDOM:()=>ue});async function ue(){try{let e=[],t=document.querySelectorAll('script[type="text/texscript"]');if(!t)throw new Error(p.ERR0003);if(t.length>1)for(let s of Array.from(t)){let o=await ut(s);o&&e.push(o)}else{let s=t[0];if(s){let o=await ut(s);o&&e.push(o)}}if(!(e.length>0))throw new Error(p.ERR0014);return e.join(`
`)}catch(e){h(e,"error")}}async function ut(e){var o;if(!e)throw new Error(p.ERR0016);let t=(o=e.innerText)!=null?o:null,r=e.getAttribute("src");if(!t&&!r)throw new Error(p.ERR0020);let i=null,s=null;if(t&&(i=t.trim(),!i))throw new Error(p.ERR0014);if(r&&!dt.includes(r)){let a=await fetch(r);if(a.status===404)throw new Error(p.ERR0021+": "+r);if(s=(await a.text()).trim(),s)dt.push(r);else throw new Error(p.ERR0014)}if(i&&s)return`${i}
${s}`;if(i)return i;if(s)return s}var dt,ht=l(()=>{"use strict";E();w();dt=[]});var z=l(()=>{"use strict"});function me(e){return/^[0-9]$/.test(e)}function he(e){return/^[A-Z]$/.test(e)}function ge(e){return/^[a-z]$/.test(e)}function P(e){return/^ $/.test(e)}function Se(e){return/^\t$/.test(e)}function fe(e){return/^\($/.test(e)}function Z(e){return/^\)$/.test(e)}function tt(e){return/^\[$/.test(e)}function Re(e){return/^\]$/.test(e)}function j(e){return/^\:$/.test(e)}function Ee(e){return/^\-$/.test(e)}function gt(e){return/^\,$/.test(e)}function Ce(e){return/^\$$/.test(e)}function Te(e){return/^\@$/.test(e)}function St(e){return/^\*$/.test(e)}function et(e){return/^\/$/.test(e)}function ft(e){return/^\.$/.test(e)}function Rt(e){return/^\"$/.test(e)}function xe(e){return/^$/.test(e)}function q(e){return/^\n$/.test(e)}var M,Ct=l(()=>{"use strict";E();f();z();M=class{constructor(t){this.metrics=new m("PrePrecessor");this.characterStream=[];if(!t)throw new Error(p.ERR0023);this.characterStream=t}lexicalAnalysis(){this.metrics.start();let t=[],r=0,i=0,s="",o=this.characterStream.length,a=1,c=1,d=()=>c-s.length;for(let u=0;u<o+1;u++,c++){let n=this.characterStream[u]||"";switch(i){case 0:{if(P(n)||Se(n))continue;if(q(n)){r++,a++,c=1;continue}else Z(n)?(i=1,u--,c--):fe(n)?i=2:Re(n)?(i=3,u--,c--):tt(n)?i=4:j(n)?i=5:gt(n)?i=6:Ce(n)?i=7:Te(n)?i=8:et(n)?i=11:ft(n)?i=10:ge(n)?(i=12,u--,c--):me(n)?i=13:he(n)?(i=16,u--,c--):Rt(n)?i=17:xe(n)?i=18:i=19;break}case 1:{t.push({type:"BRACKET_ROUND_CLOSE",value:")",line:a,column:d()}),i=0;break}case 2:{t.push({type:"BRACKET_ROUND_OPEN",value:"(",line:a,column:d()}),i=0,u--,c--;break}case 3:{t.push({type:"BRACKET_SQUARE_CLOSE",value:"]",line:a,column:d()}),i=0;break}case 4:{t.push({type:"BRACKET_SQUARE_OPEN",value:"[",line:a,column:d()}),i=0,u--,c--;break}case 5:{t.push({type:"COLON",value:":",line:a,column:d()}),i=0,u--,c--;break}case 6:{t.push({type:"COMMA",value:",",line:a,column:d()}),i=0;break}case 7:{P(n)||Z(n)||q(n)||gt(n)?(t.push({type:"CONSTANT",value:s,line:a,column:d()}),s="",i=0,u--,c--):s+=n;break}case 8:{P(n)?(t.push({type:"DECLARATION",value:s,line:a,column:d()}),s="",i=0):s+=n;break}case 9:{et(n)?(t.push({type:"DECORATOR",value:s,line:a,column:d()}),s="",i=0):s+=n;break}case 10:{t.push({type:"DOT",value:".",line:a,column:d()}),i=0,u--,c--;break}case 11:{et(n)?i=14:St(n)?i=15:(Ee(n)||j(n))&&(i=9,u--);break}case 18:{s="",i=18;break}case 19:throw new Error("Error happened during lexical analysis");case 12:{P(n)||j(n)||tt(n)||Z(n)?(t.push({type:"IDENTIFIER",value:s,line:a,column:d()}),s="",i=0,u--,c--):s+=n;break}case 13:{s+=n,P(n)&&(t.push({type:"INTEGER",value:s,line:a,column:d()}),s="",i=0);break}case 15:{St(n)&&(i=14);break}case 14:{q(n)&&(i=0);break}case 16:{P(n)||j(n)||ft(n)||q(n)||tt(n)?(t.push({type:"KEYWORD",value:s,line:a,column:d()}),s="",i=0,u--,c--):s+=n;break}case 17:{Rt(n)?(t.push({type:"STRING",value:s,line:a,column:d()}),s="",i=0):s+=n;break}}}return t.length&&!r&&++r,this.metrics.end(),{tokens:t,locCount:r}}}});var D,Tt=l(()=>{"use strict";E();f();D=class{constructor(t){this.metrics=new m("PrePrecessor");this.rawCode="";if(!t)throw new Error(p.ERR0002);this.rawCode=t}preprocessCode(){this.metrics.start();let t=this.trim(this.rawCode),r=this.normalize(t),i=this.convertToCharacterStream(r);return this.metrics.end(),i}convertToCharacterStream(t){return t.split("")}normalize(t){return t.replace(/\r/gi,"")}trim(t){return t.trim()}}});var I,B,W,y,Y,Q,xt=l(()=>{"use strict";B=class{constructor(t){A(this,I,null);N(this,I,t)}getNodeType(){return x(this,I)}};I=new WeakMap;W=class extends B{constructor(){super("ROOT");this.value=null;this.meta={};this.body=[];this.references={};this.configurations={}}},y=class extends B{constructor(){super("TAG");this.value=null;this.htmlElement=null;this.customCSSClasses=[];this.parameters={};this.children=[];this.htmlAttributes={}}},Y=class extends B{constructor(){super("LITERAL");this.value=null}},Q=class extends B{constructor(){super("SPEC_TAG");this.htmlElement=null;this.value=null}}});var g,rt=l(()=>{"use strict";g=class{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){if(this.isEmpty())throw new Error("Stack underflow");return this.items.pop()}isEmpty(){return this.items.length===0}peek(){return this.isEmpty()?null:this.items[this.items.length-1]}}});var $,kt=l(()=>{"use strict";E();f();xt();rt();z();$=class{constructor(t){this.metrics=new m("PrePrecessor");this.tokens=[];this.ast=new W;this.declarations={configure:{},reference:{}};this.declarationStack=new g;this.contextStack=new g;this.tagStack=new g;this.bracketRoundStack=new g;this.bracketSquareStack=new g;this.colonStack=new g;this.dotStack=new g;this.keyStack=new g;this.currentNode=null;if(!t)throw new Error(p.ERR0007);this.tokens=t}syntaxAnalysis(){this.metrics.start();for(let[t,r]of Object.entries(this.tokens))switch(r.type){case"BRACKET_ROUND_CLOSE":this.handleBracketRoundClose();break;case"BRACKET_ROUND_OPEN":this.handleBracketRoundOpen();break;case"BRACKET_SQUARE_CLOSE":this.handleBracketSquareClose();break;case"BRACKET_SQUARE_OPEN":this.handleBracketSquareOpen();break;case"COLON":this.handleColon(r);break;case"COMMA":continue;case"CONSTANT":this.handleConstant(r);break;case"DECLARATION":this.handleDeclaration(r);break;case"DECORATOR":this.handleDecorator(r);break;case"DOT":this.handleDot();break;case"IDENTIFIER":this.handleIdentifier(r);break;case"INTEGER":continue;case"KEYWORD":this.handleKeyword(r);break;case"STRING":this.handleString(r);break}return this.ast.configurations=this.declarations.configure,this.ast.references=this.declarations.reference,this.metrics.end(),this.ast}handleString(t){let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):i?this.handleParameterStatement(t):this.handleStringLiteralStatement(t)}handleKeyword(t){this.contextStack.push("KEYWORD");let r=new y;if(r.value=t.value,r.htmlElement="div",t.value==="Section"?r.htmlElement="section":t.value==="List"&&(r.htmlElement="ul"),this.currentNode=r,this.tagStack.isEmpty()){if(this.ast.body.length>0){let s=new y;s.value="PageBreak",s.htmlElement="div",this.ast.body.push(s)}let i=new y;i.value="PageWrapper",i.htmlElement="div",i.children.push(this.currentNode),this.ast.body.push(i)}else{let i=this.tagStack.isEmpty()?null:this.tagStack.peek();i&&i.children&&i.children.push(this.currentNode)}}handleIdentifier(t){var o;let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.dotStack.peek()==="DOT",s=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN";r?this.declarationStack.push(t.value):i?((o=this.currentNode)==null||o.customCSSClasses.push(t.value),this.dotStack.pop()):s&&this.keyStack.push(t.value)}handleDot(){this.contextStack.peek()==="KEYWORD"&&this.dotStack.push("DOT")}handleDecorator(t){var d;let r=/\:+/.test(t.value),i=/\-+/.test(t.value),s="",o="";r?(s="br",o="BR"):i&&(s="hr",o="HR");let a=[],c=t.value.split("");for(let u of c){let n=new Q;n.htmlElement=s,n.value=o,a.push(n)}(d=this.currentNode)==null||d.children.push(...a)}handleDeclaration(t){this.contextStack.push("DECLARATION"),this.declarationStack.push(t.value)}handleConstant(t){let r=this.contextStack.peek()==="DECLARATION",i=this.contextStack.peek()==="KEYWORD"&&this.bracketRoundStack.peek()==="BRACKET_ROUND_OPEN"&&this.keyStack.peek();r?this.handleDeclarationStatement(t):i&&this.handleParameterStatement(t)}handleColon(t){this.colonStack.push(t.value)}handleBracketSquareOpen(){this.bracketSquareStack.push("BRACKET_SQUARE_OPEN"),this.currentNode&&this.tagStack.push(this.currentNode)}handleBracketSquareClose(){this.tagStack.isEmpty()||this.tagStack.pop(),this.tagStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek()),this.contextStack.pop(),this.bracketSquareStack.pop()}handleBracketRoundOpen(){this.bracketRoundStack.push("BRACKET_ROUND_OPEN")}handleBracketRoundClose(){this.bracketRoundStack.pop()}handleDeclarationStatement(t){let r=t.value,i=this.declarationStack.pop(),s=this.declarationStack.pop().toLowerCase();s&&i&&r&&(this.declarations[s]||(this.declarations[s]={}),s==="configure"?this.declarations[s][i]=r:s==="reference"&&(this.declarations[s][i]||(this.declarations[s][i]=[]),Array.isArray(this.declarations[s][i])&&(this.declarations[s][i].includes(r)||this.declarations[s][i].push(r))),this.colonStack.pop(),this.contextStack.pop())}handleParameterStatement(t){let r=this.keyStack.pop();this.currentNode&&(this.currentNode.parameters||(this.currentNode.parameters={}),this.currentNode.parameters[r]=t.value,this.colonStack.pop())}handleStringLiteralStatement(t){let r=new Y;r.value=t.value;let i=new y;if(this.tagStack.isEmpty())i.value="Line",i.htmlElement="div";else{let s=this.tagStack.isEmpty()?null:this.tagStack.peek();(s==null?void 0:s.value)==="List"?(i.value="ListItem",i.htmlElement="li"):(i.value="Line",i.htmlElement="div")}if(i.children.push(r),!this.currentNode)throw new Error("'currentNode' doesn't exist");this.currentNode.children.push(i),this.colonStack.isEmpty()||(this.currentNode=this.tagStack.isEmpty()?null:this.tagStack.peek(),this.colonStack.pop())}}});var F,wt=l(()=>{"use strict";E();f();rt();z();F=class{constructor(t){this.metrics=new m("Syntax Checker");this.tokens=[];if(!t)throw new Error(p.ERR0007);this.tokens=t}checkSyntax(){let t=!1;return this.metrics.start(),t=this.checkBracketsBalance(),this.metrics.end(),t}checkBracketsBalance(){let t=new g;for(let r of this.tokens)if(r.type==="BRACKET_ROUND_OPEN")t.push(r.value);else if(r.type==="BRACKET_ROUND_CLOSE")if(t.peek()==="(")t.pop();else throw new Error(`Unmatched ) after Ln ${r.line}, Col ${r.column}`);else if(r.type==="BRACKET_SQUARE_OPEN")t.push(r.value);else if(r.type==="BRACKET_SQUARE_CLOSE")if(t.peek()==="[")t.pop();else throw new Error(`Unmatched ] after Ln ${r.line}, Col ${r.column}`);return!0}}});var yt={};k(yt,{default:()=>X});var X,bt=l(()=>{"use strict";E();f();Ct();Tt();kt();wt();X=class{constructor(){this.version="v0.3";this.repourl="https://github.com/M9J/texscript.git";this.metrics=new m("Texscript Compilation");this.rawCode="";this.tokens=null;this.ast=null;this.locCount=0;console.log(`[Texscript: Info] > Compiler ${this.version}`)}get lastCompilation(){return new Map([["tokens",this.tokens],["ast",this.ast]])}toString(){return{version:this.version,repoURL:this.repourl,lastCompilation:this.lastCompilation}}compile(t){if(!t)throw new Error(p.ERR0002);this.metrics.start(),this.rawCode=t;let i=new D(this.rawCode).preprocessCode(),s=new M(i),{tokens:o,locCount:a}=s.lexicalAnalysis();if(this.tokens=o,this.locCount=a,!new F(o).checkSyntax())throw new Error(p.ERR0026);let n=new $(o).syntaxAnalysis();return n.value="Program",n.meta.languageName="Texscript",n.meta.languageCompilerVersion=this.version,this.ast=n,this.metrics.end(),n}}});var H,vt=l(()=>{"use strict";E();f();H=class{constructor(t){this.ast=null;this.metrics=new m("Texscript Code Generation");if(!t)throw new Error(p.ERR0009);this.ast=t}generateCodeForHTML(){if(!this.ast)throw new Error(p.ERR0009);let t="";this.metrics.start();for(let r of this.ast.body){let i=r.getNodeType();(i==="TAG"||i==="SPEC_TAG"||i==="LITERAL")&&(t+=this.generateHTMLForNode(r))}return this.metrics.end(),t.trim()}generateHTMLForNode(t){if(!t)throw new Error(p.ERR0010);let r=t.getNodeType(),i=t.value,s=t.htmlElement,o=t.htmlAttributes,a=t.parameters,c=t.customCSSClasses,d=t.children||[],u="",n="",C="";if(Array.isArray(c)&&c.length>0&&(u=` ${c.join(" ")}`),a)for(let R in a){let T=a[R];n+=` texscript-${i}-${R.toUpperCase()}-${T.toUpperCase()}`}if(o)for(let R in o){let T=o[R];C+=` ${R}="${T}"`}return r==="TAG"?`<${s} class="texscript-${i}${u}${n}" ${C}>
    ${d.filter(R=>{let T=R.getNodeType();return T==="TAG"||T==="SPEC_TAG"||T==="LITERAL"}).map(R=>this.generateHTMLForNode(R)).join("")}</${s}>`:r==="SPEC_TAG"?`<${s} class="texscript-${i}"/>`:r==="LITERAL"?`${i}`:""}}});var U,At=l(()=>{"use strict";U={pageSize:"",pagePadding:"",lineHeight:"normal",letterSpacing:"normal"}});function Ot(e,t="mm"){let r=ke[e.toUpperCase()];if(!r)return null;switch(t){case"px":return{width:Math.round(r.width*3.779527),height:Math.round(r.height*3.779527)};case"in":return{width:parseFloat((r.width*Nt).toFixed(2)),height:parseFloat((r.height*Nt).toFixed(2))};case"mm":default:return r}}var Nt,ke,Lt=l(()=>{"use strict";Nt=.0393701,ke={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},A6:{width:105,height:148},B0:{width:1e3,height:1414},B1:{width:707,height:1e3},B2:{width:500,height:707},B3:{width:353,height:500},B4:{width:250,height:353},B5:{width:176,height:250},C4:{width:229,height:324},C5:{width:162,height:229},C6:{width:114,height:162}}});function V(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}var K,it=l(()=>{"use strict";f();K=class{constructor(){this.metricsCSSBuilder=new m("CSS Builder");this.CSSConfig={classes:{},globalRules:[]}}addStyle(t,r,i){this.CSSConfig.classes[t]||(this.CSSConfig.classes[t]={}),this.CSSConfig.classes[t][r]=i}addGlobalRule(t){this.CSSConfig.globalRules.push(t)}buildCSS(){this.metricsCSSBuilder.start();let t=Object.entries(this.CSSConfig.classes).map(([i,s])=>{let o=Object.entries(s).map(([a,c])=>`${a}: ${c};`).join(" ");return`${i} { ${o} }`}).join(`
`),r=this.CSSConfig.globalRules.join(`
`);return this.metricsCSSBuilder.end(),`${t}
${r}`}}});async function Pt(e){if(e){await ve(e.pageSize),await be(e.pagePadding),await ye(e.lineHeight),await we(e.letterSpacing);let t=b.buildCSS();V(t)}}async function we(e=U.letterSpacing){e&&b.addStyle(".texscript-Page","letter-spacing",e)}async function ye(e=U.lineHeight){e&&b.addStyle(".texscript-Page","line-height",e)}async function be(e=U.pagePadding){e&&e&&b.addStyle(".texscript-PageWrapper","padding",e)}async function ve(e=U.pageSize){if(e){let r=Ot(e,"in");r&&r.width&&r.height&&(b.addGlobalRule(`@media print { @page { size: ${e}} }`),b.addStyle(".texscript-PageWrapper","width",r.width+"in"),b.addStyle(".texscript-PageWrapper","height",r.height+"in"))}}var b,Bt=l(()=>{"use strict";At();Lt();it();b=new K});var Ae,G,_t=l(()=>{"use strict";f();Ae=["align-items","color","display","flex-direction","font-family","font-size","font-weight","gap","justify-content","letter-spacing","padding-left","text-align"],G=class{constructor(){this.metricsCSSFilterCompiler=new m("CSS Filter Compiler");this.allowedProperties=Ae}compile(t){this.metricsCSSFilterCompiler.start();let r={classes:[],imports:[]},i=/@import\s+(?:url\()?["']?([^"')]+)["']?\)?\s*;/g,s;for(;(s=i.exec(t))!==null;){let c=s[1];typeof c=="string"&&c.trim()&&r.imports.push(c.trim())}let o=/((?:\.[a-zA-Z0-9_-]+\s*,?\s*)+)\{([^}]+)\}/g,a;for(;(a=o.exec(t))!==null;){let c=a[1],d=a[2],u=[];d&&d.split(";").forEach(n=>{let[C,R]=n.split(":").map(T=>T.trim());this.allowedProperties.includes(C)&&u.push({property:C,value:R})}),c&&c.split(",").map(C=>C.trim()).forEach(C=>{C.startsWith(".")&&r.classes.push({selector:C,declarations:[...u]})})}return this.metricsCSSFilterCompiler.end(),r}generateFilteredCSSContent(t){var s;if(!t)return"";let r=((s=t.imports)==null?void 0:s.map(o=>`@import url("${o}");`))||[],i=t.classes.map(o=>{let a=o.declarations.map(c=>`  ${c.property}: ${c.value};`).join(`
`);return`${o.selector} {
${a}
}`});return[...r,...i].join(`

`)}}});async function Mt(e){let t=new m("CSS File Loader");t.start();let r=[];for(let i of e)if(!r.includes(i)){let s=await fetch(i);if(s.status===404)throw new Error(p.ERR0022+": "+i);let o=await s.text();if(o){let a=new G,c=a.compile(o),d=a.generateFilteredCSSContent(c);V(d),r.push(i)}}t.end()}var Dt=l(()=>{"use strict";E();f();it();_t()});var $t,It=l(()=>{$t="#TexscriptHostElement { position: relative; width: 100%; background-color: #252529; overflow: auto; box-sizing: border-box; margin: 0; padding: 0;}.reset * { box-sizing: border-box;}.display-none { display: none;}a { text-decoration: none; font-style: italic;}"});var Ht,Ft=l(()=>{Ht="@media print { body { background: #fff !important; margin: 0 !important; padding: 0 !important; } .texscript-pages-container { margin: 0 !important; padding: 0 !important; } .texscript-pages { gap: 0px !important; } .texscript-PageWrapper { box-shadow: none !important; page-break-after: always !important; break-after: page !important; page-break-inside: avoid !important; break-inside: avoid !important; } .texscript-Page { margin: 0 !important; box-shadow: none !important; } .texscript-PageBreak { page-break-before: always !important; break-before: page !important; display: block !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; } .page-break-after { page-break-after: always !important; break-after: page !important; } .avoid-break { page-break-inside: avoid !important; break-inside: avoid !important; }}"});var Kt,Ut=l(()=>{Kt=".texscript-Blocks-DIRECTION-ROW { flex-direction: row;}.texscript-Blocks-DIRECTION-COLUMN { flex-direction: column;}.texscript-Blocks-SPACE-BETWEEN { justify-content: space-between;}.texscript-Blocks-ALIGN-CENTER { align-items: center;}"});var zt,Gt=l(()=>{zt=".texscript-pages-container { display: inline-block; margin: 24px;}.texscript-pages { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; justify-content: flex-start;}.texscript-PageWrapper { display: flex; flex-direction: column; background-color: #fff; box-sizing: border-box; box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.5); flex: 0 0 auto;}.texscript-Page { display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden;}.texscript-Line { display: block;}.texscript-HR { height: 0; background: transparent; margin: 8px 0; border: 0; border-top: 1px solid #000;}.texscript-List { padding-left: 24px; margin-block-start: 0; margin-block-end: 0;}.texscript-Blocks { display: flex;}"});var qt,jt=l(()=>{qt=".texscript-List-TYPE-BULLET .texscript-ListItem { list-style-type: disc;}.texscript-List-TYPE-NUMBER .texscript-ListItem { list-style-type: decimal;}"});var Yt,Wt=l(()=>{Yt=".texscript-Line-ALIGN-CENTER { text-align: center;}.texscript-Line-ALIGN-RIGHT { text-align: right;}"});var Qt,Xt=l(()=>{"use strict";It();Ft();Ut();Gt();jt();Wt();Qt=$t+Ht+Kt+zt+qt+Yt});async function Vt(){await Me(),await De()}async function Me(){try{let e=document.createElement("style");e.textContent=Qt,document.head.appendChild(e)}catch(e){h(e,"error")}}async function De(){let e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.head.appendChild(e)}var Jt=l(()=>{"use strict";Xt();w()});var te={};k(te,{process:()=>Ie});async function Ie(e,t){try{Zt.start(),h("Compiling...");let r=e.compile(t);if(await Vt(),r){let u=r.configurations;u&&(h("Loading configurations..."),await Fe(u),S("95"));let n=r.references;n&&(h("Loading references..."),await $e(n),S("98"))}let s=new H(r).generateCodeForHTML();h("Compilation done.");let o=document.querySelector(".texscript-banner-container");o instanceof HTMLElement&&(o.style.display="none");let a=document.createElement("div");a.className="texscript-pages",a.innerHTML=s;let c=document.createElement("div");c.className="texscript-pages-container",c.classList.add("display-none"),c.appendChild(a);let d=v();d.innerHTML=c.outerHTML,await document.fonts.ready,c.classList.remove("display-none"),S("100"),window.TexscriptCompiler=e.toString(),He(),Zt.end()}catch(r){h(r,"error")}}async function $e(e){e&&e.css&&await Mt(e.css)}async function Fe(e){e&&await Pt(e)}function He(){(!document.title||document.title.trim()==="")&&(document.title="Texscript | "+location.host+location.pathname);let e=document.documentElement;(!e.lang||e.lang.trim()==="")&&(e.lang="en");let t=document.querySelector('meta[name="description"]');t?(!t.content||t.content.trim()==="")&&(t.content="This page was compiled by Texscript Compiler"):(t=document.createElement("meta"),t.name="description",t.content="This page was compiled by Texscript Compiler",document.head.appendChild(t))}var Zt,ee=l(()=>{"use strict";J();vt();Bt();Dt();f();Jt();w();Zt=new m("Texscript Process")});var re={};k(re,{load:()=>Ue});async function Ue(){try{let e=new m("Texscript Loader");e.start(),h("Getting handy tools..."),S("20");let t=await Promise.resolve().then(()=>(ht(),mt));h("Opening curse words..."),S("30");let r=await Promise.resolve().then(()=>(E(),pt));h("Loading brain power..."),S("50");let i=await Promise.resolve().then(()=>(bt(),yt)),s=new i.default,o=await Promise.resolve().then(()=>(ee(),te));S("60"),h("Finding your story...");let a=await t.findCodeFromDOM();if(!a)throw new Error(r.default.ERR0001);S("90"),e.end(),o.process(s,a)}catch(e){h(e,"error")}}var ie=l(()=>{"use strict";f();w()});var ne={};k(ne,{hideSplashProgress:()=>se,loadSplash:()=>je,updateSplashProgress:()=>S,updateSplashStatus:()=>h});async function je(){try{S("8");let e=document.createElement("style");e.innerHTML=ze,document.head.appendChild(e);let t=document.createElement("div");t.innerHTML=Ge,v().appendChild(t),h("Fetching Texscript Loader...");let i=await Promise.resolve().then(()=>(ie(),re));S("10"),h("Fetched Texscript Loader"),h("Loading Texscript modules..."),await i.load()}catch(e){h(e,"error")}}function h(e,t){let r="";t==="error"?r=(o=>`<div class="texscript-splash-status-${o}">${e.toString().replaceAll(`
`,"<br/>")}</div>`)("error"):r=`<div>${e}</div>`;let i=document.getElementById("texscript-splash-status");if(i&&(o=>{i.innerHTML+=o})(r),t&&["error"].includes(t)){let s=document.getElementById("texscript-splash");s&&(s.style.display="flex")}t==="error"&&console.error(e)}function S(e){if(e){let t=document.getElementById("texscript-splash-progress");t&&t.setAttribute("value",e),parseInt(e)>99&&se()}}function se(){let e=document.getElementById("texscript-splash-progress");e&&(e.style.display="none")}var Ke,Ge,ze,w=l(()=>{"use strict";J();ct();Ke='Texscript Markup Language [Version 0.3]<br/>Free and Open Source. Licensed under GPL-3.0.<br/>Hosted on GitHub: <a href="https://github.com/M9J/texscript.git">texscript.git</a>',Ge=`
<div class="texscript-splash-container" id="texscript-splash">
  <div class="texscript-splash">
    <div>${Ke}</div>
    <br/><hr/><br/>
    <div id="texscript-splash-status"></div>
  </div>
</div>
`,ze=lt});var oe={};k(oe,{load:()=>We});async function We(){let e=v(),t=document.createElement("style");t.textContent=qe,document.head.appendChild(t);let r=document.createElement("progress");r.setAttribute("class","texscript-splash-progress-bar"),r.setAttribute("id","texscript-splash-progress"),r.setAttribute("value","0"),r.setAttribute("max","100"),e.appendChild(r),r.setAttribute("value","2");let i=await Promise.resolve().then(()=>(w(),ne));r.setAttribute("value","5"),await i.loadSplash()}var qe,ae=l(()=>{"use strict";J();ot();qe=at});function v(){let e=document.querySelector("[data-texscript-host]");return e||document.body}var J=l(()=>{document.addEventListener("DOMContentLoaded",async()=>{if(window.__texscript_loaded__)return;window.__texscript_loaded__=!0;let e=v();e instanceof HTMLElement&&(e.setAttribute("id","TexscriptHostElement"),e.classList.add("reset"),e instanceof HTMLBodyElement||(e.innerHTML=""),e.style.background="#252529",e.style.margin="0px",e.style.padding="0px"),(await Promise.resolve().then(()=>(ae(),oe))).load()})});J();})();
